(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{"4e57403ae39e55c8e5c1":function(e,t,a){"use strict";a.r(t);var o,n=a("8af190b70a6bc55c6f1b"),r=a("e95a63b25fb92ed15721"),i=a("bd183afcc37eabd79225"),s=a.n(i),c=a("0d7f0986bcd2f33d8a2a"),u=a("7286e4d32da69e8d8af9"),d=a("ab039aecd4a1d4fedc0e"),l="boilerplate.containers.BankPage",p=(Object(d.defineMessages)({search:{id:"".concat("boilerplate.containers.All",".search"),defaultMessage:""},addbank:{id:"".concat(l,".addbank"),defaultMessage:""},title:{id:"".concat(l,".title"),defaultMessage:""},subtitle:{id:"".concat(l,".subtitle"),defaultMessage:""},th1:{id:"".concat(l,".th1"),defaultMessage:""},th2:{id:"".concat(l,".th2"),defaultMessage:""},th3:{id:"".concat(l,".th3"),defaultMessage:""},th4:{id:"".concat(l,".th4"),defaultMessage:""},th5:{id:"".concat(l,".th5"),defaultMessage:""},menu1:{id:"".concat(l,".menu1"),defaultMessage:""},menu2:{id:"".concat(l,".menu2"),defaultMessage:""},menu3:{id:"".concat(l,".menu3"),defaultMessage:""},popup1:{id:"".concat(l,".popup1"),defaultMessage:""},popup2:{id:"".concat(l,".popup2"),defaultMessage:""},popup3:{id:"".concat(l,".popup3"),defaultMessage:""},popup4:{id:"".concat(l,".popup4"),defaultMessage:""},popup5:{id:"".concat(l,".popup5"),defaultMessage:""},popup6:{id:"".concat(l,".popup6"),defaultMessage:""},popup7:{id:"".concat(l,".popup7"),defaultMessage:""},popup8:{id:"".concat(l,".popup8"),defaultMessage:""},popup9:{id:"".concat(l,".popup9"),defaultMessage:""},popup10:{id:"".concat(l,".popup10"),defaultMessage:""},verify:{id:"".concat(l,".verify"),defaultMessage:""},otp:{id:"".concat(l,".otp"),defaultMessage:""}}),a("5eab5618c2f7cb367580")),f=a("2f99b2068e4e32a85fbf"),g=a("b9a4675f3a31731e3871"),h=a("80305d31256481b97990"),m=(a("bd52f7640650dc9ceb27"),a("71ec66720a09c58ba054")),v=a("216c386425ccbc0ca890"),b=a("0b036161fbb62d587aed"),y=(a("c62184e16136b13faf11"),a("edda6002988d22cf0116")),k=a("0d02ea6f9c8f088e4ee6"),S=(a("44d868fbe7bf379dace3"),a("fa2ce0da44cf966bc1d9"),a("3cfc5fe5ae5fc3fb28ab")),_=a("a5a6067b351c18817e3b"),w=a("d4645642fe31e65af398"),C=(a("b7427a1bef7d4198bad2"),a("1338cbe09bd1ccd2eec5")),M=a("2ef0388ad848e10584a5"),R=a("0b3cb19af78752326f59"),F=a("041021065ead6515c7e1"),B=a("fcb99a06256635f70435");a("18fd55adb10446515347");function x(e){return(x="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,a,n){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===i)t.children=n;else if(i>1){for(var c=new Array(i),u=0;u<i;u++)c[u]=arguments[u+3];t.children=c}return{$$typeof:o,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function I(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"default",function(){return fe});var A=R.c.h4.withConfig({displayName:"EditFee__H4",componentId:"agdk8t-0"})(["> span{font-size:13px;color:#666;}"]);u.toast.configure({position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var E=localStorage.getItem("logged"),q=localStorage.getItem("isAdmin"),L=localStorage.getItem("feeid"),j=O(F.a,{fullPage:!0}),D=O(r.Redirect,{to:"/"}),U=O(c.Helmet,{},void 0,O("meta",{charSet:"utf-8"}),O("title",{},void 0,"Create Fee | INFRA | E-WALLET")),H=O(m.a,{infraNav:!0}),z=O(h.a,{href:"/dashboard"},void 0,O("div",{className:"headerNavDash"},void 0,"Main Dashboard")),J=O("i",{className:"material-icons"},void 0,"arrow_back"),G=O("h3",{},void 0,"Edit Revenue sharing Rule"),$=O("label",{},void 0,"Name*"),K=O("option",{value:""},void 0,"Transaction Type*"),Q=O("option",{},void 0,"Wallet to Wallet "),V=O("option",{},void 0,"Non Wallet to Non Wallet"),X=O("option",{},void 0,"Non Wallet to Wallet"),Y=O("option",{},void 0,"Wallet to Non Wallet"),Z=O("option",{},void 0,"Wallet to merchant"),ee=O("option",{},void 0,"Non Wallet to Merchant"),te=O("option",{},void 0,"Wallet to Bank Account"),ae=O("option",{},void 0,"Bank Account to Wallet Request"),oe=O("option",{},void 0,"Active"),ne=O("option",{},void 0,"Inactive "),re=O(A,{},void 0,"Transaction Count"),ie=O("label",{},void 0,"From*"),se=O("label",{},void 0,"To*"),ce=O("label",{},void 0,"Fixed Amount*"),ue=O("label",{},void 0,"Percentage*"),de=O("span",{},void 0,"Add Another Range"),le=O(k.a,{filledBtn:!0,marginTop:"50px",disabled:!0},void 0,O(F.a,{})),pe=O(k.a,{filledBtn:!0,marginTop:"50px"},void 0,O("span",{},void 0,"Update Rule")),fe=function(e){function t(){var e,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=N(t).call(this),e=!o||"object"!==x(o)&&"function"!==typeof o?P(a):o,T(P(e),"success",function(){return u.toast.success(e.state.notification)}),T(P(e),"error",function(){return u.toast.error(e.state.notification)}),T(P(e),"warn",function(){return u.toast.warn(e.state.notification)}),T(P(e),"handleInputChange",function(t){console.log(t);var a=t.target,o=a.value,n=a.name;e.setState(T({},n,o))}),T(P(e),"showPopup",function(){e.props.history.push("/createfee/"+e.props.match.params.bank)}),T(P(e),"closePopup",function(){e.setState({popup:!1,name:"",address1:"",state:"",zip:"",ccode:"",country:"",email:"",mobile:"",logo:null,contract:null,otp:"",showOtp:!1})}),T(P(e),"addRange",function(){var t=e.state.ranges,a=t.length,o=t[a-1].trans_to;""==o?e.setState({notification:"Fill previous range first"},function(){e.error()}):o<=t[a-1].trans_from?e.setState({notification:"To value has to be greater than From value in all ranges"},function(){e.error()}):(o=Number(o)+1,t.push({trans_from:o,trans_to:"",fixed_amount:"",percentage:""}),e.setState({ranges:t}))}),T(P(e),"handleInputChange2",function(t){var a=t.target,o=a.value,n=a.name,r=e.state.ranges,i=t.target.getAttribute("data-key");r[i][n]=o,console.log(r[i]),e.setState({ranges:r})}),T(P(e),"removeRange",function(t){console.log(t);var a=e.state.ranges;a.splice(t,1),e.setState({ranges:a})}),T(P(e),"logout",function(){localStorage.removeItem("logged"),localStorage.removeItem("name"),e.setState({redirect:!0})}),T(P(e),"addBank",function(t){t.preventDefault(),s.a.post("".concat(B.a,"/generateOTP"),{name:e.state.name,mobile:e.state.mobile,page:"addBank",token:E}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({showOtp:!0,notification:"OTP Sent"}),e.success()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),T(P(e),"createRules",function(t){t.preventDefault(),""==e.state.fixed_amount&&""==e.state.percentage||""!=e.state.fixed_amount&&""!=e.state.percentage?e.setState({notification:"Fill either fixed amount or percentage"},function(){e.error()}):s.a.post("".concat(B.a,"/createRules"),e.state).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Rule added"},function(){e.success();var t=e.state.bank,a=e.props.history;setTimeout(function(){a.push("/fees/"+t)},1e3)})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),T(P(e),"editRules",function(t){t.preventDefault(),e.setState({editRulesLoading:!0}),s.a.post("".concat(B.a,"/editRule"),e.state).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Rule updated"},function(){e.success();var t=e.state.bank,a=e.props.history;setTimeout(function(){a.push("/fees/"+t)},1e3)}),e.setState({editRulesLoading:!1})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString(),editRulesLoading:!1}),e.error()})}),T(P(e),"verifyOTP",function(t){t.preventDefault(),s.a.post("".concat(B.a,"/addBank"),{name:e.state.name,address1:e.state.address1,state:e.state.state,zip:e.state.zip,country:e.state.country,ccode:e.state.ccode,email:e.state.email,mobile:e.state.mobile,logo:e.state.logo,contract:e.state.contract,otp:e.state.otp,token:E}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Bank added successfully!"}),e.success(),e.closePopup(),e.getBanks(),e.getFees()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),T(P(e),"removeFile",function(t){e.setState(T({},t,null))}),T(P(e),"triggerBrowse",function(e){document.getElementById(e).click()}),T(P(e),"getBanks",function(){s.a.post("".concat(B.a,"/getBank"),{token:E,bank_id:e.props.match.params.bank}).then(function(t){200==t.status&&e.setState({banks:t.data.banks,logo:t.data.banks.logo,bank_id:e.props.match.params.bank})}).catch(function(e){})}),T(P(e),"getFees",function(){s.a.post("".concat(B.a,"/getRule"),{token:E,rule_id:e.state.rule_id}).then(function(t){if(200==t.status){var a=JSON.parse(t.data.rules.ranges);e.setState(T({loading:!1,name:t.data.rules.name,trans_type:t.data.rules.trans_type,active:t.data.rules.active,ranges:a},"loading",!1),function(){console.log(e.state)})}}).catch(function(e){})}),e.state={bank_id:"",logo:null,rule_id:L,contract:null,loading:!0,redirect:!1,name:"",trans_type:"",active:"Active",trans_from:"",trans_to:"",transcount_from:"",transcount_to:"",fixed_amount:"",percentage:"",notification:"",popup:!1,user_id:E,banks:[],ranges:[],otp:"",showOtp:!1,token:E,permissions:{}},e.success=e.success.bind(P(e)),e.error=e.error.bind(P(e)),e.warn=e.warn.bind(P(e)),e.onChange=e.onChange.bind(P(e)),e.fileUpload=e.fileUpload.bind(P(e)),e}var a,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(t,n["Component"]),a=t,(o=[{key:"onChange",value:function(e){e.target.files&&null!=e.target.files[0]&&this.fileUpload(e.target.files[0],e.target.getAttribute("data-key"))}},{key:"fileUpload",value:function(e,t){var a=this,o=new FormData;o.append("file",e);s.a.post("".concat(B.a,"/fileUpload?token=").concat(E),o,{headers:{"content-type":"multipart/form-data"}}).then(function(e){if(200!=e.status)throw e.data.error;if(e.data.error)throw e.data.error;a.setState(T({},t,e.data.name))}).catch(function(e){a.setState({notification:e.response?e.response.data.error:e.toString()}),a.error()})}},{key:"componentDidMount",value:function(){var e=this;this.setState({bank:this.props.match.params.bank}),void 0!==E&&null!==E&&("true"==q?this.setState({permissions:"all"}):s.a.post("".concat(B.a,"/getPermission"),{token:E}).then(function(t){200==t.status&&e.setState({permissions:t.data.permissions},function(){console.log(e.state.permissions)})}).catch(function(e){console.log(e)}),this.getBanks(),this.getFees())}},{key:"render",value:function(){function e(e){e.target.parentElement.querySelector("label").classList.add("focused")}function t(e){var t=e.target;""==t.value&&t.parentElement.querySelector("label").classList.remove("focused")}var a=this.state,o=a.loading,n=a.redirect;if(o)return j;if(n)return D;var r=this;return O(p.a,{},void 0,U,O(f.a,{},void 0,H,O(g.a,{},void 0,z,O("div",{className:"bankLogo"},void 0,O("img",{src:B.d+this.state.logo})),O("h2",{},void 0,this.state.banks.name))),O(g.a,{verticalMargin:!0},void 0,O(v.a,{bankId:this.state.bank,active:"fees"}),O(b.a,{},void 0,O(y.a,{bigPadding:!0,centerSmall:!0},void 0,O("div",{className:"cardHeader"},void 0,O("div",{className:"cardHeaderLeft flex"},void 0,O(h.a,{href:"/fees/"+this.props.match.params.bank},void 0,J),G)),O("div",{className:"cardBody"},void 0,O("form",{action:"",method:"post",onSubmit:this.editRules},void 0,O(S.a,{},void 0,$,O(_.a,{type:"text",name:"name",onFocus:e,onBlur:t,value:this.state.name,autoFocus:!0,onChange:this.handleInputChange,required:!0})),O(C.a,{},void 0,O(M.a,{},void 0,O(S.a,{},void 0,O(w.a,{type:"text",name:"trans_type",value:this.state.trans_type,autoFocus:!0,onChange:this.handleInputChange.bind(this),required:!0,list:"ttype"},void 0,K,Q,V,X,Y,Z,ee,te,ae))),O(M.a,{},void 0,O(S.a,{},void 0,O(w.a,{type:"text",name:"active",value:this.state.active,autoFocus:!0,onChange:this.handleInputChange,required:!0,list:"act"},void 0,oe,ne)))),re,this.state.ranges.map(function(a,o){return O(C.a,{},o,O(M.a,{cW:"20%",mR:"2%"},void 0,O(S.a,{},void 0,ie,O(_.a,o>0?{type:"text",name:"trans_from",onFocus:e,onBlur:t,value:a.trans_from,onChange:r.handleInputChange2,"data-key":o,autoFocus:!0,readOnly:!0,required:!0}:{type:"text",pattern:"[0-9]{1,}",title:"Greater than or equal to 0",name:"trans_from",onFocus:e,onBlur:t,value:a.trans_from,onChange:r.handleInputChange2,"data-key":o,autoFocus:!0,required:!0}))),O(M.a,{cW:"20%",mR:"2%"},void 0,O(S.a,{},void 0,se,O(_.a,{type:"text",pattern:"[0-9]{1,}",title:"Greater than or equal to 0",name:"trans_to",onFocus:e,onBlur:t,value:a.trans_to,onChange:r.handleInputChange2,"data-key":o,autoFocus:!0,required:!0}))),O(M.a,{cW:"26%",mR:"2%"},void 0,O(S.a,{},void 0,ce,O(_.a,{type:"text",name:"fixed_amount",onFocus:e,required:!0,onBlur:t,value:a.fixed_amount,autoFocus:!0,onChange:r.handleInputChange2,"data-key":o}))),O(M.a,{cW:"28%",mR:"0"},void 0,O(S.a,{},void 0,ue,O(_.a,{required:!0,type:"text",name:"percentage",onFocus:e,onBlur:t,value:a.percentage,autoFocus:!0,onChange:r.handleInputChange2,"data-key":o})),o>0?O("span",{onClick:function(){return r.removeRange(o)},className:"material-icons removeBtn pointer"},void 0,"cancel"):null))}),O(k.a,{type:"button",accentedBtn:!0,marginTop:"10px",onClick:this.addRange},void 0,de),this.state.editRulesLoading?le:pe))))))}}])&&I(a.prototype,o),r&&I(a,r),t}()}}]);
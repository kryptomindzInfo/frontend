(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{b34da162eae909849ca6:function(e,t,a){"use strict";a.r(t);var n,o=a("8af190b70a6bc55c6f1b"),r=a("e95a63b25fb92ed15721"),i=a("bd183afcc37eabd79225"),s=a.n(i),c=a("0d7f0986bcd2f33d8a2a"),l=a("7286e4d32da69e8d8af9"),u=a("ab039aecd4a1d4fedc0e"),d=(Object(u.defineMessages)({header:{id:"".concat("app.containers.BankCreateFee",".header"),defaultMessage:"This is the BankCreateFee container!"}}),a("5eab5618c2f7cb367580")),f=a("b9a4675f3a31731e3871"),p=a("80305d31256481b97990"),g=a("0b036161fbb62d587aed"),v=(a("c62184e16136b13faf11"),a("edda6002988d22cf0116")),h=a("0d02ea6f9c8f088e4ee6"),b=(a("44d868fbe7bf379dace3"),a("fa2ce0da44cf966bc1d9"),a("3cfc5fe5ae5fc3fb28ab")),m=a("a5a6067b351c18817e3b"),y=a("d4645642fe31e65af398"),_=(a("b7427a1bef7d4198bad2"),a("1338cbe09bd1ccd2eec5")),k=a("2ef0388ad848e10584a5"),S=a("0b3cb19af78752326f59"),w=a("041021065ead6515c7e1"),C=a("d8177b52ec3b30c23986"),R=a("56dae34f294aa29bb48a"),B=a("fcb99a06256635f70435");a("18fd55adb10446515347");function F(e){return(F="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,a,o){n||(n="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===i)t.children=o;else if(i>1){for(var c=new Array(i),l=0;l<i;l++)c[l]=arguments[l+3];t.children=c}return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function I(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"default",function(){return ce});var q=S.c.h4.withConfig({displayName:"BankCreateFee__H4",componentId:"sc-1ocwezf-0"})(["> span{font-size:13px;color:#666;}"]);l.toast.configure({position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var L=localStorage.getItem("bankLogged"),P=localStorage.getItem("bankId"),A=x(w.a,{fullPage:!0}),E=x(r.Redirect,{to:"/"}),j=x(c.Helmet,{},void 0,x("meta",{charSet:"utf-8"}),x("title",{},void 0,"Create Fee | INFRA | E-WALLET")),H=x(C.a,{}),U=x(R.a,{active:"fees"}),M=x(p.a,{href:"/bank/fees"},void 0,x("i",{className:"material-icons"},void 0,"arrow_back")),z=x("label",{},void 0,"Name*"),D=x("option",{value:""},void 0,"Transaction Type*"),G=x("option",{},void 0,"Wallet to Wallet"),J=x("option",{},void 0,"Non Wallet to Non Wallet"),$=x("option",{},void 0,"Non Wallet to Wallet"),K=x("option",{},void 0,"Wallet to Non Wallet"),Q=x("option",{},void 0,"Non Wallet to Operational"),V=x("option",{},void 0,"Wallet to Bank Account"),X=x("option",{},void 0,"Bank Account to Wallet Request"),Y=x("option",{},void 0,"Active"),Z=x("option",{},void 0,"Inactive "),ee=x(q,{},void 0,"Transaction Range"),te=x("label",{},void 0,"From*"),ae=x("label",{className:"focused"},void 0,"To*"),ne=x("label",{},void 0,"Fixed Amount*"),oe=x("label",{},void 0,"Percentage*"),re=x("span",{},void 0,"Add Another Range"),ie=x(h.a,{filledBtn:!0,marginTop:"100px",disabled:!0},void 0,x(w.a,{})),se=x(h.a,{filledBtn:!0,marginTop:"100px"},void 0,x("span",{},void 0,"Create Rules")),ce=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=O(t).call(this),e=!n||"object"!==F(n)&&"function"!==typeof n?W(a):n,T(W(e),"success",function(){return l.toast.success(e.state.notification)}),T(W(e),"error",function(){return l.toast.error(e.state.notification)}),T(W(e),"warn",function(){return l.toast.warn(e.state.notification)}),T(W(e),"handleInputChange",function(t){var a=t.target,n=a.value,o=a.name;e.setState(T({},o,n))}),T(W(e),"handleInputChange2",function(t){var a=t.target,n=a.value,o=a.name,r=e.state.ranges,i=t.target.getAttribute("data-key");r[i][o]=n,console.log(r[i]),e.setState({ranges:r}),console.log(r[r.length-1].trans_to),r[r.length-1].trans_to<999999999?e.setState({showaddrange:!0}):e.setState({showaddrange:!1})}),T(W(e),"showPopup",function(){e.props.history.push("/BankCreateFee/"+e.props.match.params.bank)}),T(W(e),"closePopup",function(){e.setState({popup:!1,name:"",address1:"",state:"",zip:"",ccode:"",country:"",email:"",mobile:"",logo:null,contract:null,otp:"",showOtp:!1})}),T(W(e),"logout",function(){localStorage.removeItem("logged"),localStorage.removeItem("name"),e.setState({redirect:!0})}),T(W(e),"createRules",function(t){t.preventDefault();var a=e.state.ranges,n=a.length;a[n-1].trans_to<=a[n-1].trans_from?e.setState({notification:"To value has to be greater than From value in all ranges"},function(){e.error()}):(e.setState({createRulesLoading:!0}),s.a.post("".concat(B.a,"/createBankRules"),e.state).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Rule added"},function(){e.success();e.state.bank;var t=e.props.history;setTimeout(function(){t.push("/bank/fees/")},1e3)}),e.setState({createRulesLoading:!1})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString(),createRulesLoading:!1}),e.error()}))}),T(W(e),"createRevenueRule",function(){e.setState({createRulesLoading:!0});var t=e.state,a=t.name,n=t.trans_type,o=t.active,r=t.ranges,i=t.bank_id,c=t.token;r=r.map(function(e){return{trans_from:e.trans_from,trans_to:e.trans_to,fixed:e.revenue_sharing_fixed,percentage:e.revenue_sharing_percentage}}),s.a.post("".concat(B.a,"/createRules"),{name:a,trans_type:n,active:o,ranges:r,bank_id:i,token:c}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Rule added"},function(){e.success();e.state.bank;var t=e.props.history;setTimeout(function(){t.push("/bank/fees/")},1e3)}),e.setState({createRulesLoading:!1})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString(),createRulesLoading:!1}),e.error()})}),T(W(e),"removeFile",function(t){e.setState(T({},t,null))}),T(W(e),"addRange",function(){var t=e.state.ranges,a=t.length,n=t[a-1].trans_to,o=t[a-1];o.revenue_sharing_percentage,o.revenue_sharing_fixed;""==n?e.setState({notification:"Fill previous range first"},function(){e.error()}):n<=t[a-1].trans_from?e.setState({notification:"To value has to be greater than From value in all ranges"},function(){e.error()}):(n=Number(n)+1,t.push({trans_from:n,trans_to:"999999999",fixed:"",percentage:"",revenue_sharing_fixed:"",revenue_sharing_percentage:""}),e.setState({ranges:t}))}),T(W(e),"removeRange",function(t){var a=e.state.ranges;a.splice(t,1),e.setState({ranges:a})}),T(W(e),"triggerBrowse",function(e){document.getElementById(e).click()}),T(W(e),"getBanks",function(){s.a.post("".concat(B.a,"/getBank"),{token:L,bank_id:e.props.match.params.bank}).then(function(t){200==t.status&&e.setState({loading:!1,banks:t.data.banks,logo:t.data.banks.logo,bank_id:e.props.match.params.bank})}).catch(function(e){})}),e.state={bank_id:P,logo:null,contract:null,loading:!0,redirect:!1,showaddrange:!1,name:"",ranges:[{trans_from:"1",trans_to:"999999999",fixed:"",percentage:"",revenue_sharing_fixed:"",revenue_sharing_percentage:""}],trans_type:"",active:"Active",trans_from:0,trans_to:1e3,transcount_from:"",transcount_to:"",fixed:"",percentage:"",notification:"",popup:!1,user_id:L,banks:[],otp:"",showOtp:!1,token:L,permissions:{}},e.success=e.success.bind(W(e)),e.error=e.error.bind(W(e)),e.warn=e.warn.bind(W(e)),e.onChange=e.onChange.bind(W(e)),e.fileUpload=e.fileUpload.bind(W(e)),e}var a,n,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,o["Component"]),a=t,(n=[{key:"onChange",value:function(e){e.target.files&&null!=e.target.files[0]&&this.fileUpload(e.target.files[0],e.target.getAttribute("data-key"))}},{key:"fileUpload",value:function(e,t){var a=this,n=new FormData;n.append("file",e);s.a.post("".concat(B.a,"/fileUpload?token=").concat(L),n,{headers:{"content-type":"multipart/form-data"}}).then(function(e){if(200!=e.status)throw e.data.error;if(e.data.error)throw e.data.error;a.setState(T({},t,e.data.name))}).catch(function(e){a.setState({notification:e.response?e.response.data.error:e.toString()}),a.error()})}},{key:"componentDidMount",value:function(){this.setState({loading:!1})}},{key:"render",value:function(){function e(e){e.target.parentElement.querySelector("label").classList.add("focused")}function t(e){var t=e.target;""==t.value&&t.parentElement.querySelector("label").classList.remove("focused")}var a=this.state,n=a.loading,o=a.redirect;if(n)return A;if(o)return E;var r=this;return x(d.a,{},void 0,j,H,x(f.a,{verticalMargin:!0},void 0,U,x(g.a,{},void 0,x(v.a,{bigPadding:!0},void 0,x("div",{className:"cardHeader"},void 0,x("div",{className:"cardHeaderLeft flex"},void 0,M,x("h3",{style:{margin:"auto"}},void 0,"Create Fee Rules"))),x("div",{className:"cardBody"},void 0,x("form",{action:"",method:"post",onSubmit:this.createRules},void 0,x(b.a,{},void 0,z,x(m.a,{type:"text",name:"name",onFocus:e,onBlur:t,value:this.state.name,onChange:this.handleInputChange,required:!0})),x(_.a,{},void 0,x(k.a,{},void 0,x(b.a,{},void 0,x(y.a,{type:"text",name:"trans_type",value:this.state.trans_type,onChange:this.handleInputChange.bind(this),required:!0,list:"ttype"},void 0,D,G,J,$,K,Q,V,X))),x(k.a,{},void 0,x(b.a,{},void 0,x(y.a,{type:"text",name:"active",value:this.state.active,onChange:this.handleInputChange,required:!0,list:"act"},void 0,Y,Z)))),ee,this.state.ranges.map(function(a,n){return x(_.a,{},n,x(k.a,{cW:"20%",mR:"2%"},void 0,x(b.a,{},void 0,te,x(m.a,n>0?{type:"number",min:"0",name:"trans_from",onFocus:e,onBlur:t,value:a.trans_from,onChange:r.handleInputChange2,"data-key":n,autoFocus:!0,readOnly:!0,required:!0}:{type:"number",pattern:"[0-9]{1,}",title:"Greater than or equal to 0",name:"trans_from",onFocus:e,onBlur:t,value:a.trans_from,onChange:r.handleInputChange2,"data-key":n,autoFocus:!0,required:!0}))),x(k.a,{cW:"20%",mR:"2%"},void 0,x(b.a,{},void 0,ae,x(m.a,{type:"number",pattern:"[0-9]{1,}",title:"Greater than or equal to 0",name:"trans_to",onFocus:e,onBlur:t,value:a.trans_to,onChange:r.handleInputChange2,"data-key":n,required:!0}))),x(k.a,{cW:"30%",mR:"2%"},void 0,x(b.a,{},void 0,ne,x(m.a,{type:"number",name:"fixed",onFocus:e,required:!0,onBlur:t,value:a.fixed,onChange:r.handleInputChange2,"data-key":n}))),x(k.a,{cW:"28%",mR:"8%"},void 0,x(b.a,{},void 0,oe,x(m.a,{required:!0,type:"number",name:"percentage",onFocus:e,onBlur:t,value:a.percentage,onChange:r.handleInputChange2,"data-key":n})),n>0?x("span",{onClick:function(){return r.removeRange(n)},className:"material-icons removeBtn pointer"},void 0,"cancel"):null))}),x(h.a,{type:"button",accentedBtn:!0,marginTop:"10px",onClick:this.addRange,style:{display:"".concat(this.state.showaddrange?"block":"none")}},void 0,re),this.createRulesLoading?ie:se))))))}}])&&I(a.prototype,n),r&&I(a,r),t}()}}]);
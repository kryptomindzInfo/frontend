(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{dee19340d42e3efaafe1:function(e,t,a){"use strict";a.r(t);var o,n=a("8af190b70a6bc55c6f1b"),i=a.n(n),s=a("e95a63b25fb92ed15721"),r=a("bd183afcc37eabd79225"),c=a.n(r),d=a("0d7f0986bcd2f33d8a2a"),l=a("7286e4d32da69e8d8af9"),u=a("ab039aecd4a1d4fedc0e"),p="boilerplate.containers.BankPage",f=Object(u.defineMessages)({search:{id:"".concat("boilerplate.containers.All",".search"),defaultMessage:""},addbank:{id:"".concat(p,".addbank"),defaultMessage:""},title:{id:"".concat(p,".title"),defaultMessage:""},subtitle:{id:"".concat(p,".subtitle"),defaultMessage:""},th1:{id:"".concat(p,".th1"),defaultMessage:""},th2:{id:"".concat(p,".th2"),defaultMessage:""},th3:{id:"".concat(p,".th3"),defaultMessage:""},th4:{id:"".concat(p,".th4"),defaultMessage:""},th5:{id:"".concat(p,".th5"),defaultMessage:""},menu1:{id:"".concat(p,".menu1"),defaultMessage:""},menu2:{id:"".concat(p,".menu2"),defaultMessage:""},menu3:{id:"".concat(p,".menu3"),defaultMessage:""},popup1:{id:"".concat(p,".popup1"),defaultMessage:""},popup2:{id:"".concat(p,".popup2"),defaultMessage:""},popup3:{id:"".concat(p,".popup3"),defaultMessage:""},popup4:{id:"".concat(p,".popup4"),defaultMessage:""},popup5:{id:"".concat(p,".popup5"),defaultMessage:""},popup6:{id:"".concat(p,".popup6"),defaultMessage:""},popup7:{id:"".concat(p,".popup7"),defaultMessage:""},popup8:{id:"".concat(p,".popup8"),defaultMessage:""},popup9:{id:"".concat(p,".popup9"),defaultMessage:""},popup10:{id:"".concat(p,".popup10"),defaultMessage:""},verify:{id:"".concat(p,".verify"),defaultMessage:""},otp:{id:"".concat(p,".otp"),defaultMessage:""}}),h=a("5eab5618c2f7cb367580"),g=a("2f99b2068e4e32a85fbf"),m=a("b9a4675f3a31731e3871"),b=a("041021065ead6515c7e1"),v=(a("bd52f7640650dc9ceb27"),a("71ec66720a09c58ba054")),y=a("216c386425ccbc0ca890"),k=a("0b036161fbb62d587aed"),M=(a("c62184e16136b13faf11"),a("edda6002988d22cf0116")),w=a("0d02ea6f9c8f088e4ee6"),S=a("80305d31256481b97990"),C=a("fa2ce0da44cf966bc1d9"),B=a("3cfc5fe5ae5fc3fb28ab"),F=a("a5a6067b351c18817e3b"),E=a("b7427a1bef7d4198bad2"),O=a("1338cbe09bd1ccd2eec5"),x=a("2ef0388ad848e10584a5"),I=a("fcb99a06256635f70435");a("18fd55adb10446515347");function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,a,n){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,s=arguments.length-3;if(t||0===s||(t={children:void 0}),t&&i)for(var r in i)void 0===t[r]&&(t[r]=i[r]);else t||(t=i||{});if(1===s)t.children=n;else if(s>1){for(var c=new Array(s),d=0;d<s;d++)c[d]=arguments[d+3];t.children=c}return{$$typeof:o,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function P(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"default",function(){return Y}),l.toast.configure({position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var A=localStorage.getItem("logged"),L=_(b.a,{fullPage:!0}),z=_(s.Redirect,{to:"/"}),H=_(d.Helmet,{},void 0,_("meta",{charSet:"utf-8"}),_("title",{},void 0,"Banks | INFRA | E-WALLET")),J=_(v.a,{infraNav:!0}),R=_(S.a,{href:"/dashboard",float:"left"},void 0,_("div",{className:"headerNavDash"},void 0,"Main Dashboard")),U=_("div",{className:"cardHeader"}),W=_("h3",{},void 0,"FILES"),K=_("i",{className:"material-icons"},void 0,"cloud_upload"),$=_("i",{className:"material-icons"},void 0,"cloud_upload"),Y=function(e){function t(){var e,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=T(t).call(this),e=!o||"object"!==N(o)&&"function"!==typeof o?D(a):o,j(D(e),"success",function(){return l.toast.success(e.state.notification)}),j(D(e),"error",function(){return l.toast.error(e.state.notification)}),j(D(e),"warn",function(){return l.toast.warn(e.state.notification)}),j(D(e),"handleInputChange",function(t){var a=t.target,o=a.value,n=a.name;e.setState(j({},n,o))}),j(D(e),"showPopup",function(){e.props.history.push("/createfee/"+e.props.match.params.bank)}),j(D(e),"closePopup",function(){e.setState({popup:!1,name:"",address1:"",state:"",zip:"",ccode:"",country:"",email:"",mobile:"",logo:null,contract:null,otp:"",showOtp:!1})}),j(D(e),"logout",function(){localStorage.removeItem("logged"),localStorage.removeItem("name"),e.setState({redirect:!0})}),j(D(e),"addBank",function(t){t.preventDefault(),c.a.post("".concat(I.a,"/generateOTP"),{name:e.state.name,mobile:e.state.mobile,page:"addBank",token:A}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({showOtp:!0,notification:"OTP Sent"}),e.success()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),j(D(e),"verifyOTP",function(t){t.preventDefault(),c.a.post("".concat(I.a,"/addBank"),{name:e.state.name,address1:e.state.address1,state:e.state.state,zip:e.state.zip,country:e.state.country,ccode:e.state.ccode,email:e.state.email,mobile:e.state.mobile,logo:e.state.logo,contract:e.state.contract,otp:e.state.otp,token:A}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Bank added successfully!"}),e.success(),e.closePopup(),e.getBanks()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),j(D(e),"removeFile",function(t){e.setState(j({},t,null))}),j(D(e),"triggerBrowse",function(e){document.getElementById(e).click()}),j(D(e),"getBanks",function(){c.a.post("".concat(I.a,"/getBank"),{token:A,bank_id:e.props.match.params.bank}).then(function(t){200==t.status&&e.setState({loading:!1,banks:t.data.banks,logo:t.data.banks.logo})}).catch(function(e){})}),j(D(e),"getRules",function(){c.a.post("".concat(I.a,"/getRules"),{token:A,bank_id:e.props.match.params.bank}).then(function(t){200==t.status&&e.setState({rules:t.data.rules})}).catch(function(e){})}),j(D(e),"getDocs",function(){c.a.post("".concat(I.a,"/getDocs"),{token:A,bank_id:e.props.match.params.bank}).then(function(t){200==t.status&&e.setState({loading:!1,docs:t.data.docs})}).catch(function(e){})}),e.state={bank:"",name:"",address1:"",state:"",zip:"",country:"",ccode:"",mobile:"",email:"",logo:null,contract:null,loading:!0,redirect:!1,totalBanks:0,notification:"Welcome",popup:!1,user_id:A,banks:[],rules:[],docs:[],otp:"",showOtp:!1},e.success=e.success.bind(D(e)),e.error=e.error.bind(D(e)),e.warn=e.warn.bind(D(e)),e.onChange=e.onChange.bind(D(e)),e.fileUpload=e.fileUpload.bind(D(e)),e}var a,o,s;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,n["Component"]),a=t,(o=[{key:"onChange",value:function(e){e.target.files&&null!=e.target.files[0]&&this.fileUpload(e.target.files[0],e.target.getAttribute("data-key"))}},{key:"fileUpload",value:function(e,t){var a=this,o=new FormData;o.append("file",e);c.a.post("".concat(I.a,"/fileUpload?token=").concat(A),o,{headers:{"content-type":"multipart/form-data"}}).then(function(e){if(200!=e.status)throw e.data.error;if(e.data.error)throw e.data.error;a.setState(j({},t,e.data.name))}).catch(function(e){a.setState({notification:e.response?e.response.data.error:e.toString()}),a.error()})}},{key:"componentDidMount",value:function(){this.setState({bank:this.props.match.params.bank}),void 0!==A&&null!==A&&(this.getBanks(),this.getDocs())}},{key:"render",value:function(){var e=this;function t(e){e.target.parentElement.querySelector("label").classList.add("focused")}function a(e){var t=e.target;""==t.value&&t.parentElement.querySelector("label").classList.remove("focused")}var o=this.state,n=o.loading,s=o.redirect;if(n)return L;if(s)return z;var r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return _(h.a,{},void 0,H,_(g.a,{},void 0,J,_(m.a,{},void 0,R)),_(m.a,{verticalMargin:!0},void 0,_("div",{className:"bankLogo",style:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:"16px",marginBottom:"1.2rem",boxShadow:"0 0 1px black",paddingTop:"16px",backgroundColor:"white"}},void 0,_("img",{src:I.e+this.state.logo,style:{width:"75px"}}),_("div",{style:{paddingLeft:"5px",paddingTop:"7px"}},void 0,_("h2",{},void 0,this.state.banks&&this.state.banks.name))),_(y.a,{bankId:this.state.bank,active:"documents"}),_(k.a,{big:!0},void 0,_(M.a,{bigPadding:!0},void 0,U,_("div",{className:"cardBody clr"},void 0,W,this.state.docs&&this.state.docs.length>0?this.state.docs.map(function(e){var t=e.contract.replace(/^.*[\\\/]/,""),a=(e.contract.split(".").pop(),I.e+"main/pdf-icon.png"),o=e.created_at,n=new Date(o),i=n.getMonth(),s=n.getDay(),c=n.getFullYear(),d=n.getHours(),l=n.getMinutes(),u=s+" "+r[i]+" "+c+" "+d+":"+l;return _(M.a,{blueHover:!0,col:!0,horizontalMargin:"10px",cardWidth:"192px",className:"doc"},e._id,_("a",{href:I.b+e.contract,target:"_blank"},void 0,_("div",{className:"profile"},void 0,_("img",{src:a})),_("h4",{className:"hhh"},void 0,t),_("h4",{className:"hhhh"},void 0,u)))}):null)))),this.state.popup?_(C.a,{close:this.closePopup.bind(this)},void 0,this.state.showOtp?_("div",{},void 0,_("h1",{},void 0,i.a.createElement(u.FormattedMessage,f.verify)),_("form",{action:"",method:"post",onSubmit:this.verifyOTP},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.otp),"*"),_(F.a,{type:"text",name:"otp",onFocus:t,onBlur:a,value:this.state.otp,onChange:this.handleInputChange,required:!0})),_(w.a,{filledBtn:!0,marginTop:"50px"},void 0,_("span",{},void 0,i.a.createElement(u.FormattedMessage,f.verify))))):_("div",{},void 0,_("h1",{},void 0,i.a.createElement(u.FormattedMessage,f.addbank)),_("form",{action:"",method:"post",onSubmit:this.addBank},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup1),"*"),_(F.a,{type:"text",name:"name",onFocus:t,onBlur:a,value:this.state.name,onChange:this.handleInputChange,required:!0})),_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup2),"*"),_(F.a,{type:"text",name:"address1",onFocus:t,onBlur:a,value:this.state.address1,onChange:this.handleInputChange,required:!0})),_(O.a,{},void 0,_(x.a,{},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup3),"*"),_(F.a,{type:"text",name:"state",onFocus:t,onBlur:a,value:this.state.state,onChange:this.handleInputChange,required:!0}))),_(x.a,{},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup4),"*"),_(F.a,{type:"text",name:"zip",onFocus:t,onBlur:a,value:this.state.zip,onChange:this.handleInputChange,required:!0})))),_(O.a,{},void 0,_(x.a,{},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup5),"*"),_(F.a,{type:"text",name:"country",onFocus:t,onBlur:a,value:this.state.country,onChange:this.handleInputChange,required:!0}))),_(x.a,{},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup6),"*"),_(F.a,{type:"text",name:"ccode",onFocus:t,onBlur:a,value:this.state.ccode,onChange:this.handleInputChange,required:!0})))),_(O.a,{},void 0,_(x.a,{},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup7),"*"),_(F.a,{type:"text",name:"mobile",onFocus:t,onBlur:a,value:this.state.mobile,onChange:this.handleInputChange,required:!0}))),_(x.a,{},void 0,_(B.a,{},void 0,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup8),"*"),_(F.a,{type:"text",name:"email",onFocus:t,onBlur:a,value:this.state.email,onChange:this.handleInputChange,required:!0})))),_(B.a,{},void 0,_(E.a,{bgImg:I.e+this.state.logo},void 0,this.state.logo?_("a",{className:"uploadedImg",href:I.e+this.state.logo,target:"_BLANK"}):" ",_("div",{className:"uploadTrigger",onClick:function(){return e.triggerBrowse("logo")}},void 0,_("input",{type:"file",id:"logo",onChange:this.onChange,"data-key":"logo"}),this.state.logo?" ":K,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup9)," *")))),_(B.a,{},void 0,_(E.a,{bgImg:I.e+"main/pdf-icon.png"},void 0,this.state.contract?_("a",{className:"uploadedImg",href:I.b+this.state.contract,target:"_BLANK"}):" ",_("div",{className:"uploadTrigger",onClick:function(){return e.triggerBrowse("contract")}},void 0,_("input",{type:"file",id:"contract",onChange:this.onChange,"data-key":"contract"}),this.state.contract?" ":$,_("label",{},void 0,i.a.createElement(u.FormattedMessage,f.popup10)," *")))),_(w.a,{filledBtn:!0,marginTop:"50px"},void 0,_("span",{},void 0,i.a.createElement(u.FormattedMessage,f.addbank)))))):null)}}])&&P(a.prototype,o),s&&P(a,s),t}()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"94dcd0ed5d77f21c259b":function(e,t,n){"use strict";n.r(t);var a,r=n("8af190b70a6bc55c6f1b"),i=n.n(r),o=n("bd183afcc37eabd79225"),s=n.n(o),c=n("0d7f0986bcd2f33d8a2a"),d=n("0d939196e59ed73c94e6"),l=n("7286e4d32da69e8d8af9"),u=n("0b3cb19af78752326f59"),p=n("5eab5618c2f7cb367580"),f=n("d8177b52ec3b30c23986"),v=n("56dae34f294aa29bb48a"),h=n("b9a4675f3a31731e3871"),b=n("041021065ead6515c7e1"),m=n("0b036161fbb62d587aed"),g=n("c62184e16136b13faf11"),y=n("edda6002988d22cf0116"),S=n("0d02ea6f9c8f088e4ee6"),k=n("44d868fbe7bf379dace3"),R=n("80305d31256481b97990"),_=(n("885b9f33a5ccdc168660"),n("1338cbe09bd1ccd2eec5"),n("2ef0388ad848e10584a5"),n("3cfc5fe5ae5fc3fb28ab"),n("fcb99a06256635f70435")),x=n("2aea235afd5c55b8b19b"),w=n.n(x),P=n("b912ecc4473ae8a2ff0b"),F=n.n(P),C=n("b27e083e7741c2dccb3f"),N=n.n(C),O=n("6938d226fd372a75cbf9"),B=n("e727e731a9bed8ec3c2a"),T=n.n(B),I=n("eb6b79030a47f0b10efc"),G=n.n(I),W=n("1551459233b95bf53af9"),j=n.n(W),D=n("10e4c616cb3b01bafafd"),A=n.n(D),E=n("e799c547a20a503b338f"),L=n.n(E),M=n("ab7ebb4f5c369f043e8f"),H=n.n(M),$=n("921c0b8c557fe6ba5da8"),z=n.n($),U=n("c7fd554010f79f6c0ef8"),V=n.n(U);function q(e){return(q="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t,n,r){a||(a="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&i)for(var s in i)void 0===t[s]&&(t[s]=i[s]);else t||(t=i||{});if(1===o)t.children=r;else if(o>1){for(var c=new Array(o),d=0;d<o;d++)c[d]=arguments[d+3];t.children=c}return{$$typeof:a,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var ee,te=Z(H.a,{}),ne=Object(O.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose;return Z(G.a,{disableTypography:!0,className:n.root},void 0,Z(z.a,{variant:"h6"},void 0,t),a?Z(L.a,{"aria-label":"Close",className:n.closeButton,onClick:a},void 0,te):null)}),ae=Object(O.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(j.a),re=Object(O.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(A.a),ie=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return a=this,r=(e=K(t)).call.apply(e,[this].concat(o)),n=!r||"object"!==q(r)&&"function"!==typeof r?Q(a):r,Y(Q(n),"state",{open:!1,branchId:""}),Y(Q(n),"handleClickOpen",function(){n.setState({open:!0})}),Y(Q(n),"handleClose",function(){n.setState({open:!1})}),Y(Q(n),"onFetchClick",function(){var e=n.state.branchId;s.a.post("".concat(_.a,"/get-branch-details-by-id/").concat(e),{bank_id:n.props.bank_id}).then(function(e){console.log(e);var t=e.data;if(0==t.code)return alert("Branch not found");n.props.getBranchDetailsFromModal(t.branch)}).catch(function(e){console.log(e)})}),n}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,i.a.Component),n=t,(a=[{key:"render",value:function(){var e=this;return Z("div",{},void 0,Z(T.a,{onClose:this.props.handleClose,"aria-labelledby":"customized-dialog-title",open:this.props.open},void 0,Z(ne,{id:"customized-dialog-title",onClose:this.props.handleClose},void 0,"Please enter brach ID"),Z(ae,{},void 0,Z(V.a,{variant:"outlined",label:"Branch id",style:{width:300},value:this.state.branchId,onChange:function(t){var n=t.target.value;e.setState({branchId:n})}})),Z(re,{},void 0,Z(w.a,{onClick:this.onFetchClick,color:"primary"},void 0,"fetch branch details"))))}}])&&J(n.prototype,a),r&&J(n,r),t}();function oe(e){return(oe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t,n,a){ee||(ee="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&r)for(var o in r)void 0===t[o]&&(t[o]=r[o]);else t||(t=r||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),c=0;c<i;c++)s[c]=arguments[c+3];t.children=s}return{$$typeof:ee,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var fe,ve=pe(H.a,{}),he=Object(O.withStyles)(function(e){return{root:{borderBottom:"1px solid ".concat(e.palette.divider),margin:0,padding:2*e.spacing.unit},closeButton:{position:"absolute",right:e.spacing.unit,top:e.spacing.unit,color:e.palette.grey[500]}}})(function(e){var t=e.children,n=e.classes,a=e.onClose;return pe(G.a,{disableTypography:!0,className:n.root},void 0,pe(z.a,{variant:"h6"},void 0,t),a?pe(L.a,{"aria-label":"Close",className:n.closeButton,onClick:a},void 0,ve):null)}),be=Object(O.withStyles)(function(e){return{root:{margin:0,padding:2*e.spacing.unit}}})(j.a),me=Object(O.withStyles)(function(e){return{root:{borderTop:"1px solid ".concat(e.palette.divider),margin:0,padding:e.spacing.unit}}})(A.a),ge=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return a=this,r=(e=ce(t)).call.apply(e,[this].concat(o)),n=!r||"object"!==oe(r)&&"function"!==typeof r?de(a):r,ue(de(n),"state",{open:!1,branchId:""}),ue(de(n),"handleClickOpen",function(){n.setState({open:!0})}),ue(de(n),"handleClose",function(){n.setState({open:!1})}),ue(de(n),"onFetchClick",function(){var e=n.state.partnerCode;s.a.post("".concat(_.a,"/getPartner/").concat(e),{bank_id:n.props.bank_id}).then(function(e){var t=e.data;if(0==t.status)return alert("Partner not found");n.props.getPartnerDetailsFromModal(t.partner)}).catch(function(e){console.log(e)})}),n}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,i.a.Component),n=t,(a=[{key:"render",value:function(){var e=this;return pe("div",{},void 0,pe(T.a,{onClose:this.props.handleClose,"aria-labelledby":"customized-dialog-title",open:this.props.partneropen},void 0,pe(he,{id:"customized-dialog-title",onClose:this.props.handleClose},void 0,"Please enter Parter Code"),pe(be,{},void 0,pe(V.a,{variant:"outlined",label:"Partner code",style:{width:300},value:this.state.partnerCode,onChange:function(t){var n=t.target.value;e.setState({partnerCode:n})}})),pe(me,{},void 0,pe(w.a,{onClick:this.onFetchClick,color:"primary"},void 0,"fetch partner details"))))}}])&&se(n.prototype,a),r&&se(n,r),t}();function ye(e){return(ye="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t,n,a){fe||(fe="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&r)for(var o in r)void 0===t[o]&&(t[o]=r[o]);else t||(t=r||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),c=0;c<i;c++)s[c]=arguments[c+3];t.children=s}return{$$typeof:fe,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function ke(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Fe(e,t,n[t])})}return e}function _e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce,Ne=Se(d.Grid,{item:!0,xs:12},void 0,Se(d.Typography,{variant:"subtitle"},void 0,"Standard Revenue Sharing With Other Banks")),Oe=Se(d.Grid,{item:!0},void 0,Se(d.Typography,{variant:"caption"},void 0,"and")),Be=Se(d.Grid,{item:!0}),Te=Se(d.Grid,{item:!0,xs:12},void 0,Se(N.a,{})),Ie=Se(d.Grid,{item:!0,xs:12},void 0,Se(d.Typography,{variant:"subtitle"},void 0,"Standard Revenue Sharing with Branches")),Ge=Se(d.Grid,{item:!0},void 0,Se(d.Typography,{variant:"caption"},void 0,"and")),We=Se(d.Grid,{item:!0}),je=Se(d.Grid,{item:!0},void 0,Se(d.Typography,{variant:"subtitle"},void 0,"Branches with specific revenue sharing")),De=Se(d.Grid,{item:!0,xs:12},void 0,Se(N.a,{})),Ae=Se(d.Grid,{item:!0,xs:12},void 0,Se(d.Typography,{variant:"subtitle"},void 0,"Standard Revenue Sharing with Partners")),Ee=Se(d.Grid,{item:!0},void 0,Se(d.Typography,{variant:"caption"},void 0,"and")),Le=Se(d.Grid,{item:!0}),Me=Se(d.Grid,{item:!0},void 0,Se(d.Typography,{variant:"subtitle"},void 0,"Partners with specific revenue sharing")),He=Se(d.Grid,{item:!0,xs:12},void 0,Se(N.a,{})),$e=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return a=this,r=(e=xe(t)).call.apply(e,[this].concat(o)),n=!r||"object"!==ye(r)&&"function"!==typeof r?we(a):r,Fe(we(n),"success",function(){return l.toast.success(n.state.notification)}),Fe(we(n),"error",function(){return l.toast.error(n.state.notification)}),Fe(we(n),"warn",function(){return l.toast.warn(n.state.notification)}),Fe(we(n),"state",{bid:localStorage.getItem("bankId"),type:n.props.bankFeeDetails.type,open:!1,partneropen:!1,ruleId:n.props.bankFeeDetails._id,name:n.props.bankFeeDetails.name,revenuePercentage:n.props.bankFeeDetails.infra_share.percentage||0,revenueAmount:n.props.bankFeeDetails.infra_share.fixed||0,fixed:0,percentage:0,standardRevenueSharingRule:{claim:0,send:0},branchWithSpecificRevenue:[],standardPartnerRevenueSharingRule:{claim:0,send:0},partnerWithSpecificRevenue:[],status:n.props.bankFeeDetails.status,token:window.localStorage.getItem("bankLogged"),bankBranchesTable:!0,activetab:"branch"}),Fe(we(n),"saveRevenueSharingRules",function(){n.props.revenueData?s.a.post("".concat(_.a,"/bank/interBank/updateOtherBankShares"),{token:n.state.token,rule_id:n.state.ruleId,other_bank_share:{fixed:n.state.fixed,percentage:n.state.percentage}}).then(function(e){n.setState({notification:"Rule updated successfully",editRulesLoading:!1}),n.success()}).catch(function(e){console.log(e)}):(n.setState({notification:"Please add revenue rule first",editRulesLoading:!1}),his.error())}),Fe(we(n),"saveRevenueSharingRulesForBranchAndPartner",function(){n.props.revenueData?s.a.post("".concat(_.a,"/bank/updateRevenueSharingRules"),{type:n.props.bankFeeDetails.type,bank_id:n.state.bid,token:n.state.token,revenue_sharing_rule:{branch_share:n.state.standardRevenueSharingRule,specific_branch_share:n.state.branchWithSpecificRevenue,partner_share:n.state.standardPartnerRevenueSharingRule,specific_partner_share:n.state.partnerWithSpecificRevenue}}).then(function(e){n.setState({notification:"Rule updated successfully",editRulesLoading:!1}),n.success()}).catch(function(e){console.log(e)}):(n.setState({notification:"Please add revenue rule first",editRulesLoading:!1}),his.error())}),Fe(we(n),"saveRevenue",function(){""!=n.state.revenueAmount||""!=n.state.revenuePercentage?n.createRevenueRule():(l.toast.error("Fields cannot be empty"),console.log("Empty revenue"))}),Fe(we(n),"showRevenueRuleDistributionPage",function(){s.a.post("".concat(_.a,"/getOne"),{token:n.state.token,page_id:n.props.bankFeeDetails._id,type:"bank",page:"interbankrule"}).then(function(e){console.log(e);var t=e.data;1==t.code?n.setState({revenueData:t}):n.setState({revenueData:""})}).catch(function(e){console.log(e)})}),Fe(we(n),"createRevenueRule",function(){n.setState({createRulesLoading:!0}),s.a.post("".concat(_.a,"/bank/interBank/sendShareForApproval"),{token:n.state.token,rule_id:n.state.ruleId,infra_share:{fixed:n.state.revenueAmount,percentage:n.state.revenuePercentage}}).then(function(e){if(200!=e.status)throw new Error(e.data.error);if(e.data.error)throw e.data.error;n.setState({notification:"Rule sent for Approval"},function(){n.success();n.state.bank,n.props.history;setTimeout(function(){console.log("from"),n.props.showRevenueRuleDistributionPage({_id:n.state.selectedBankFeeId,name:n.state.name})},1e3)}),n.setState({createRulesLoading:!1})}).catch(function(e){n.setState({notification:e.response?e.response.data.error:e.toString(),createRulesLoading:!1}),n.error()})}),Fe(we(n),"getBranchDetailsFromModal",function(e){if(n.state.branchWithSpecificRevenue.map(function(e){return e.branch_code}).includes(e[0].bcode))return alert("Branch already saved");n.setState(function(t){return Re({},t,{branchWithSpecificRevenue:[].concat(ke(t.branchWithSpecificRevenue),[{branch_code:e[0].bcode,branch_name:e[0].name,claim:0,send:0}])})}),n.setState({open:!1})}),Fe(we(n),"getPartnerDetailsFromModal",function(e){if(n.state.partnerWithSpecificRevenue.map(function(e){return e.partner_code}).includes(e[0].code))return alert("Partner already saved");n.setState(function(t){return Re({},t,{partnerWithSpecificRevenue:[].concat(ke(t.partnerWithSpecificRevenue),[{partner_code:e[0].code,partner_name:e[0].name,claim:0,send:0}])})}),n.setState({partneropen:!1})}),n}var n,a,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(t,i.a.Component),n=t,(a=[{key:"componentWillReceiveProps",value:function(e){var t=this.state,n=e.selectedBankFeeId,a=e.revenueData,r=e.share,i="",o="",s="",c="";if(a){var d=0===a.status?a.infra_share:2===a.infra_approval_status?a.edited.infra_share:a.infra_share;i=d.fixed,o=d.percentage;var l=a.other_bank_share;s=l.fixed,c=l.percentage,console.log(l.fixed),this.setState(function(e){return Re({},t,{selectedBankFeeId:n,revenueAmount:i,revenuePercentage:o,fixed:s,percentage:c})})}else this.setState(Re({},t,{selectedBankFeeId:n,revenueAmount:i,revenuePercentage:o,fixed:s,percentage:c}));if(r){var u=r.specific_branch_share,p=r.branch_share,f=r.partner_share,v=r.specific_partner_share;this.setState(function(e){return{standardRevenueSharingRule:p||e.branch_share,branchWithSpecificRevenue:u||e.specific_branch_share,standardPartnerRevenueSharingRule:f||e.partner_share,partnerWithSpecificRevenue:v||e.specific_partner_share}})}}},{key:"render",value:function(){var e=this,t=this.props.classes;return Se(d.Grid,{container:!0,style:{width:"74%",border:"1px solid grey"}},void 0,Se(d.Grid,{container:!0,style:{textAlign:"center",background:"#f5a623",padding:12},alignItems:"center",justify:"space-between"},void 0,Se(d.Grid,{item:!0},void 0,Se(d.Typography,{variant:"h5",style:{color:"white"}},void 0,"Revenue Rule Distribution ( "+this.state.name+" )")),Se(d.Grid,{item:!0},void 0,Se(S.a,{onClick:this.props.close},void 0,"x"))),Se(d.Grid,{style:{margin:"2%",border:"1px solid #d0d6d1",paddingTop:"3%"},container:!0},void 0,Se(d.Grid,{item:!0,md:12},void 0,Se(d.Typography,{variant:"subtitle1",style:{paddingLeft:"3%"}},void 0,"Revenue with Infra")),Se(d.Grid,{style:{margin:"0 0 2% 2%"},item:!0,md:3},void 0,Se(d.TextField,{type:"number",label:"Percentage",className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",required:"true",onChange:function(t){var n=t.target.value;e.setState({revenuePercentage:n})},value:this.state.revenuePercentage})),Se(d.Grid,{item:!0,md:1},void 0,Se(d.Typography,{style:{paddingTop:"40%",textAlign:"center"}},void 0,"and")),Se(d.Grid,{item:!0,md:3},void 0,Se(d.TextField,{type:"number",label:"Fixed",className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",required:"true",onChange:function(t){var n=t.target.value;e.setState({revenueAmount:n})},value:this.state.revenueAmount})),Se(d.Grid,{item:!0,md:3},void 0,Se(w.a,{disabled:2===this.props.revenueData.infra_approval_status,variant:"contained",color:"primary",style:{height:"40%",marginTop:"23px",marginLeft:"13%"},onClick:this.saveRevenue,className:t.button},void 0,1===this.props.revenueData.infra_approval_status?"Update":2===this.props.revenueData.infra_approval_status?"Pending":"Send for Approval")),Se(d.Grid,{item:!0,xs:12},void 0,Se("div",{className:t.border},void 0,Se(d.Grid,{item:!0,xs:12},void 0,Se(d.Grid,{container:!0,alignItems:"center"},void 0,Ne,Se(d.Grid,{item:!0},void 0,Se(d.TextField,{type:"number",label:"Percentage%",className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value;e.setState({percentage:n})},value:this.state.percentage})),Oe,Se(d.Grid,{item:!0},void 0,Se(d.TextField,{type:"number",label:"Fixed",disabled:"Wallet to Non Wallet"===this.state.trans_type,className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value;e.setState({fixed:n})},value:this.state.fixed})),Be)),Te,Se(d.Grid,{item:!0,xs:12,style:{textAlign:"right"}},void 0,Se(w.a,{variant:"contained",color:"primary",style:{marginTop:"13px"},className:t.button,onClick:this.saveRevenueSharingRules,type:"button"},void 0,"Update"))))),Se(d.Grid,{style:{margin:"2%",border:"1px solid #d0d6d1",paddingTop:"3%",display:"".concat("IBWW"===this.state.type||"IBWM-C"===this.state.type||"IBWM-F"===this.state.type?"none":"flex")},container:!0,spacing:16},void 0,Se(d.Grid,{item:!0,md:12},void 0,Se("span",{className:"".concat("branch"===this.state.activetab?"ActiveTab":"InactiveTab"," "),onClick:function(){return e.setState({activetab:"branch"})}},void 0,"Bank Branches"),Se("span",{className:"".concat("partner"===this.state.activetab?"ActiveTab":"InactiveTab"," "),onClick:function(){return e.setState({activetab:"partner"})}},void 0,"Bank Partner")),"branch"===this.state.activetab?Se(d.Grid,{container:!0,spacing:16},void 0,Se(d.Grid,{item:!0,xs:12},void 0,Se("div",{className:t.border},void 0,Se(d.Grid,{container:!0,alignItems:"center"},void 0,Ie,Se(d.Grid,{item:!0},void 0,Se(d.TextField,{type:"number",label:"claim%",className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",disabled:"IBNWW"===this.state.type||"IBNWO"===this.state.type,onChange:function(t){var n=t.target.value;e.setState(function(e){return{standardRevenueSharingRule:Re({},e.standardRevenueSharingRule,{claim:n})}})},value:this.state.standardRevenueSharingRule.claim})),Ge,Se(d.Grid,{item:!0},void 0,Se(d.TextField,{type:"number",label:"send%",disabled:"IBWNW"===this.state.type,className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value;e.setState(function(e){return{standardRevenueSharingRule:Re({},e.standardRevenueSharingRule,{send:n})}})},value:this.state.standardRevenueSharingRule.send})),We))),Se(d.Grid,{item:!0,xs:12},void 0,Se("div",{className:t.border},void 0,Se(d.Grid,{container:!0},void 0,Se(d.Grid,{item:!0,xs:12,container:!0,justify:"space-between",alignItems:"center"},void 0,je,Se(d.Grid,{item:!0},void 0,Se(S.a,{onClick:function(){return e.setState({open:!0})}},void 0,"Add branch"))),Se(d.Grid,{container:!0,spacing:4,style:{paddingTop:32},alignItems:"center"},void 0,this.state.branchWithSpecificRevenue.map(function(n,a){return i.a.createElement(i.a.Fragment,null,Se(d.Grid,{item:!0,xs:2},void 0,n.branch_code),Se(d.Grid,{item:!0,xs:2},void 0,n.branch_name),Se(d.Grid,{item:!0,xs:3},void 0,Se(d.TextField,{type:"number",label:"claim%",disabled:"IBNWW"===e.state.type||"IBNWO"===e.state.type,className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value,r=e.state.branchWithSpecificRevenue;r[a].claim=n,e.setState({branchWithSpecificRevenue:r})},value:n.claim})),Se(d.Grid,{item:!0,xs:3},void 0,Se(d.TextField,{type:"number",label:"send%",disabled:"IBWNW"===e.state.type,className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value,r=e.state.branchWithSpecificRevenue;r[a].send=n,e.setState({branchWithSpecificRevenue:r})},value:n.send})),Se(d.Grid,{item:!0,xs:2},void 0,Se(S.a,{onClick:function(){e.setState(function(e){return Re({},e,{branchWithSpecificRevenue:e.branchWithSpecificRevenue.filter(function(e){return e.branch_code!==n.branch_code})})})}},void 0,"delete")))}),De,Se(d.Grid,{item:!0,xs:12,style:{textAlign:"right"}},void 0,Se(w.a,{variant:"contained",color:"primary",style:{marginTop:"13px"},className:t.button,onClick:this.saveRevenueSharingRulesForBranchAndPartner,type:"button"},void 0,"Update"))))))):null,"partner"===this.state.activetab?Se(d.Grid,{container:!0,spacing:16},void 0,Se(d.Grid,{item:!0,xs:12},void 0,Se("div",{className:t.border},void 0,Se(d.Grid,{container:!0,alignItems:"center"},void 0,Ae,Se(d.Grid,{item:!0},void 0,Se(d.TextField,{type:"number",label:"claim%",className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",disabled:"IBNWW"===this.state.type||"IBNWO"===this.state.type,onChange:function(t){var n=t.target.value;e.setState(function(e){return{standardPartnerRevenueSharingRule:Re({},e.standardPartnerRevenueSharingRule,{claim:n})}})},value:this.state.standardPartnerRevenueSharingRule.claim})),Ee,Se(d.Grid,{item:!0},void 0,Se(d.TextField,{type:"number",label:"send%",disabled:"IBWNW"===this.state.type,className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value;e.setState(function(e){return{standardPartnerRevenueSharingRule:Re({},e.standardPartnerRevenueSharingRule,{send:n})}})},value:this.state.standardPartnerRevenueSharingRule.send})),Le))),Se(d.Grid,{item:!0,xs:12},void 0,Se("div",{className:t.border},void 0,Se(d.Grid,{container:!0},void 0,Se(d.Grid,{item:!0,xs:12,container:!0,justify:"space-between",alignItems:"center"},void 0,Me,Se(d.Grid,{item:!0},void 0,Se(S.a,{onClick:function(){return e.setState({partneropen:!0})}},void 0,"Add Partner"))),Se(d.Grid,{container:!0,spacing:4,style:{paddingTop:32},alignItems:"center"},void 0,this.state.partnerWithSpecificRevenue.map(function(n,a){return i.a.createElement(i.a.Fragment,null,Se(d.Grid,{item:!0,xs:2},void 0,n.partner_code),Se(d.Grid,{item:!0,xs:2},void 0,n.partner_name),Se(d.Grid,{item:!0,xs:3},void 0,Se(d.TextField,{type:"number",label:"claim%",disabled:"IBNWW"===e.state.type||"IBNWO"===e.state.type,className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value,r=e.state.partnerWithSpecificRevenue;r[a].claim=n,e.setState({partnerWithSpecificRevenue:r})},value:n.claim})),Se(d.Grid,{item:!0,xs:3},void 0,Se(d.TextField,{type:"number",label:"send%",disabled:"IBWNW"===e.state.type,className:F()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var n=t.target.value,r=e.state.partnerWithSpecificRevenue;r[a].send=n,e.setState({partnerWithSpecificRevenue:r})},value:n.send})),Se(d.Grid,{item:!0,xs:2},void 0,Se(S.a,{onClick:function(){e.setState(function(e){return Re({},e,{partnerWithSpecificRevenue:e.partnerWithSpecificRevenue.filter(function(e){return e.partner_code!==n.partner_code})})})}},void 0,"delete")))}),He,Se(d.Grid,{item:!0,xs:12,style:{textAlign:"right"}},void 0,Se(w.a,{variant:"contained",color:"primary",style:{marginTop:"13px"},className:t.button,onClick:this.saveRevenueSharingRulesForBranchAndPartner,type:"button"},void 0,"Update"))))))):null),Se(ie,{open:this.state.open,bank_id:this.state.bid,handleClose:function(){return e.setState({open:!1})},getBranchDetailsFromModal:this.getBranchDetailsFromModal}),Se(ge,{partneropen:this.state.partneropen,bank_id:this.state.bid,handleClose:function(){return e.setState({partneropen:!1})},getPartnerDetailsFromModal:this.getPartnerDetailsFromModal}))}}])&&_e(n.prototype,a),r&&_e(n,r),t}(),ze=Object(d.withStyles)(function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},table:{minWidth:700},bankBranches:{padding:"3%",fontWeight:600},border:{border:"1px solid #000",padding:2*e.spacing.unit}}})($e);n("18fd55adb10446515347");function Ue(e){return(Ue="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t,n,a){Ce||(Ce="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&r)for(var o in r)void 0===t[o]&&(t[o]=r[o]);else t||(t=r||{});if(1===i)t.children=a;else if(i>1){for(var s=new Array(i),c=0;c<i;c++)s[c]=arguments[c+3];t.children=s}return{$$typeof:Ce,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function qe(e,t,n,a,r,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function Je(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"InterBankFees",function(){return bt}),l.toast.configure({position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});u.c.div.withConfig({displayName:"InterBankFees__Tab",componentId:"sc-16v0ksd-0"})(["background:",";width:194px;padding:15px;float:left;border:1px solid ",";color:#fff;font-size:20px;"],function(e){return e.theme.primary},function(e){return e.theme.primary}),u.c.div.withConfig({displayName:"InterBankFees__Tab2",componentId:"sc-16v0ksd-1"})(["float:left;width:194px;border:1px solid ",";color:",";font-size:20px;padding:15px;"],function(e){return e.theme.primary},function(e){return e.theme.primary});var Ze=localStorage.getItem("bankLogged"),et=localStorage.getItem("bankId"),tt=Ve(b.a,{fullPage:!0}),nt=Ve(c.Helmet,{},void 0,Ve("meta",{charSet:"utf-8"}),Ve("title",{},void 0,"Banks | INFRA | E-WALLET")),at=Ve(f.a,{}),rt=Ve(v.a,{active:"interbankfees"}),it=Ve("div",{className:"cardHeader"},void 0,Ve("div",{className:"cardHeaderLeft"},void 0,Ve("i",{className:"material-icons"},void 0,"supervised_user_circle")),Ve("div",{className:"cardHeaderRight"},void 0,Ve("h3",{},void 0,"Revenue Sharing Rules"),Ve("h5",{},void 0,"Fees created by the infra"))),ot=Ve("thead",{},void 0,Ve("tr",{},void 0,Ve("th",{},void 0,"Name"),Ve("th",{},void 0,"Transaction Type"),Ve("th",{},void 0,"Ranges"),Ve("th",{}))),st=Ve("span",{className:"absoluteMiddleRight primary popMenuTrigger"},void 0,Ve("i",{className:"material-icons "},void 0,"block")),ct=Ve("div",{className:"iconedInput fl"},void 0,Ve("i",{className:"material-icons"},void 0,"search"),Ve("input",{type:"text",placeholder:"Search"})),dt=Ve("i",{className:"material-icons"},void 0,"add"),lt=Ve("span",{},void 0,Ve("span",{},void 0,"Create Fee")),ut=Ve("div",{className:"cardHeader"},void 0,Ve("div",{className:"cardHeaderLeft"},void 0,Ve("i",{className:"material-icons"},void 0,"supervised_user_circle")),Ve("div",{className:"cardHeaderRight"},void 0,Ve("h3",{},void 0,"Fee Rules"),Ve("h5",{},void 0,"Fees created by the bank"))),pt=Ve("th",{},void 0,"Name"),ft=Ve("th",{},void 0,"Transaction Range"),vt=Ve("th",{}),ht=Ve("th",{}),bt=function(e){function t(){var e,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,a=Ke(t).call(this),e=!a||"object"!==Ue(a)&&"function"!==typeof a?Qe(n):a,Ye(Qe(e),"success",function(){return l.toast.success(e.state.notification)}),Ye(Qe(e),"error",function(){return l.toast.error(e.state.notification)}),Ye(Qe(e),"warn",function(){return l.toast.warn(e.state.notification)}),Ye(Qe(e),"handleInputChange",function(t){var n=t.target,a=n.value,r=n.name;e.setState(Ye({},r,a))}),Ye(Qe(e),"goBankEdit",function(t){e.props.history.push("/bank/edit-inter-bank-fee/".concat(t))}),Ye(Qe(e),"logout",function(){localStorage.removeItem("logged"),localStorage.removeItem("name"),e.setState({redirect:!0})}),Ye(Qe(e),"getRules",function(){s.a.post("".concat(_.a,"/bank/interBank/getRules"),{token:Ze}).then(function(t){200==t.status&&e.setState({loading:!1,rules:t.data.rules})}).catch(function(e){})}),Ye(Qe(e),"showRevenueRuleDistributionPage",function(){var t,n=(t=regeneratorRuntime.mark(function t(n){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("to"),e.setState({revenueRuleDistributionPage:"true",selectedBankFeeId:n._id,bankFeeDetails:n}),t.prev=2,t.next=5,s.a.post("".concat(_.a,"/getOne"),{token:Ze,page_id:n._id,type:"bank",page:"interbankrule"});case 5:return a=t.sent,t.next=8,s.a.post("".concat(_.a,"/bank/getRevenueFeeForInterBank"),{token:Ze,type:n.type,bank_id:et});case 8:r=t.sent,console.log(r),e.setState({revenueData:a.data.row,share:r.data.fee}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(2),console.log(t.t0);case 16:case"end":return t.stop()}},t,null,[[2,13]])}),function(){var e=this,n=arguments;return new Promise(function(a,r){var i=t.apply(e,n);function o(e){qe(i,a,r,o,s,"next",e)}function s(e){qe(i,a,r,o,s,"throw",e)}o(void 0)})});return function(e){return n.apply(this,arguments)}}()),e.state={sid:"",bank:et,name:"",address1:"",html:"",popname:"",poprange:"",poptype:"",poppercent:"",state:"",zip:"",country:"",ccode:"",mobile:"",email:"",logo:null,contract:null,loading:!0,redirect:!1,totalBanks:0,notification:"Welcome",popup:!1,user_id:Ze,banks:[],rules:[],otp:"",showOtp:!1,isInfraFeeVisible:!1,revenueRuleDistributionPage:!1,percentage:"",bankBranchesTable:!0,bankPartnersTable:!1,bankMerchantsTable:!1,bankFeeDetails:"",selectedBankFeeId:"",revenueData:"",shares:""},e.success=e.success.bind(Qe(e)),e.error=e.error.bind(Qe(e)),e.warn=e.warn.bind(Qe(e)),e}var n,a,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){void 0!==Ze&&null!==Ze&&this.getRules()}},{key:"render",value:function(){var e=this;this.props.classes;var t=this.state,n=t.loading,a=t.redirect;if(n)return tt;if(a)return null;var r=this;return Ve(p.a,{from:"bank"},void 0,nt,at,Ve(h.a,{verticalMargin:!0},void 0,rt,Ve(m.a,{style:{display:"".concat(this.state.revenueRuleDistributionPage?"none":"block")}},void 0,Ve(y.a,{bigPadding:!0,style:{display:"".concat(this.state.isInfraFeeVisible?"block":"none")}},void 0,it,Ve("div",{className:"cardBody"},void 0,Ve(k.a,{marginTop:"34px",smallTd:!0},void 0,ot,Ve("tbody",{},void 0,this.state.rules&&this.state.rules.length>0?this.state.rules.map(function(e,t){var n=e.ranges;return Ve("tr",{},e._id,Ve("td",{},void 0,(e.status,Ve("span",{},void 0,e.name))),Ve("td",{className:"tac"},void 0,(e.status,Ve("span",{},void 0,e.trans_type))),Ve("td",{},void 0,n.map(function(e){return Ve("div",{},void 0,"Count:"," ",Ve("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",Ve("span",{className:"green"},void 0,"".concat(_.c," ").concat(e.fixed_amount)),", Percentage:"," ",Ve("span",{className:"green"},void 0,e.percentage))})),Ve("td",{className:"tac bold"},void 0,"Inactive"==e.active?st:Ve(S.a,{className:"addBankButton",onClick:function(){return r.goBankEdit(e._id)}},void 0,0==e.status?"Pending":2==e.status?"Declined":"Approved")))}):null)))),Ve("div",{style:{display:"".concat(this.state.isInfraFeeVisible?"none":"block")}},void 0,Ve(g.a,{marginBottom:"33px",inputWidth:"calc(100% - 241px)",className:"clr"},void 0,ct,Ve(R.a,{href:"/bank/create-inter-bank-fee",float:"right"},void 0,Ve(S.a,{className:"addBankButton",flex:!0,onClick:this.try},void 0,dt,lt))),Ve(y.a,{bigPadding:!0},void 0,ut,Ve("div",{className:"cardBody"},void 0,Ve(k.a,{marginTop:"34px",smallTd:!0},void 0,Ve("thead",{},void 0,Ve("tr",{},void 0,pt,Ve("th",{style:{width:"10rem"}},void 0,"Transaction Type"),ft,vt,ht)),Ve("tbody",{},void 0,this.state.rules&&this.state.rules.length>0?this.state.rules.map(function(t,n){var a=t.ranges;return Ve("tr",{},t._id,Ve("td",{},void 0,t.name),Ve("td",{className:"tac"},void 0,t.type),Ve("td",{},void 0,a.map(function(e){return Ve("div",{},void 0,"Range:"," ",Ve("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",Ve("span",{className:"green"},void 0,"".concat(_.c," ").concat(e.fixed)),", Percentage:"," ",Ve("span",{className:"green"},void 0,e.percentage))})),Ve("td",{className:"tac bold"},void 0,Ve(S.a,Ye({className:"addBankButton",onClick:function(){return r.goBankEdit(t._id)}},"className","pointer"),void 0,"Edit")),Ve("td",{},void 0,Ve(S.a,{onClick:function(){return e.showRevenueRuleDistributionPage(t)}},void 0,"Revenue Sharing Rule")))}):null)))))),this.state.revenueRuleDistributionPage?Ve(ze,{showRevenueRuleDistributionPage:this.showRevenueRuleDistributionPage,close:function(){return e.setState({revenueRuleDistributionPage:!1})},revenueData:this.state.revenueData,share:this.state.share,selectedBankFeeId:this.state.selectedBankFeeId,bankFeeDetails:this.state.bankFeeDetails}):null))}}])&&Je(n.prototype,a),i&&Je(n,i),t}();t.default=Object(d.withStyles)(function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},table:{minWidth:700},bankBranches:{padding:"3%",fontWeight:600}}})(bt)}}]);
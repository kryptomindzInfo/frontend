(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{"8577cd5032928c92aded":function(e,t,a){"use strict";a.r(t);var n,i=a("8af190b70a6bc55c6f1b"),r=a.n(i),o=a("bd183afcc37eabd79225"),s=a.n(o),c=a("0d7f0986bcd2f33d8a2a"),d=a("0d939196e59ed73c94e6"),l=a("7286e4d32da69e8d8af9"),u=a("0b3cb19af78752326f59"),p=a("5eab5618c2f7cb367580"),v=a("d8177b52ec3b30c23986"),f=a("56dae34f294aa29bb48a"),h=a("b9a4675f3a31731e3871"),m=a("041021065ead6515c7e1"),g=a("0b036161fbb62d587aed"),b=a("c62184e16136b13faf11"),y=a("edda6002988d22cf0116"),S=a("0d02ea6f9c8f088e4ee6"),k=a("44d868fbe7bf379dace3"),R=a("80305d31256481b97990"),_=a("885b9f33a5ccdc168660"),w=a("1338cbe09bd1ccd2eec5"),x=a("2ef0388ad848e10584a5"),F=a("3cfc5fe5ae5fc3fb28ab"),P=a("fcb99a06256635f70435"),T=a("2aea235afd5c55b8b19b"),B=a.n(T),N=a("b912ecc4473ae8a2ff0b"),W=a.n(N),G=a("b27e083e7741c2dccb3f"),D=a.n(G),I=a("34735bbf5ac293b48ed7"),C=a("2b20118a18f84e851a3f");function O(e){return(O="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t,a,i){n||(n="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,o=arguments.length-3;if(t||0===o||(t={children:void 0}),t&&r)for(var s in r)void 0===t[s]&&(t[s]=r[s]);else t||(t=r||{});if(1===o)t.children=i;else if(o>1){for(var c=new Array(o),d=0;d<o;d++)c[d]=arguments[d+3];t.children=c}return{$$typeof:n,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function E(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){V(e,t,a[t])})}return e}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var q,z=A(d.Grid,{item:!0,xs:12},void 0,A(d.Typography,{variant:"subtitle"},void 0,"Standard Revenue Sharing with Branches")),$=A(d.Grid,{item:!0},void 0,A(d.Typography,{variant:"caption"},void 0,"and")),J=A(d.Grid,{item:!0}),X=A(d.Grid,{item:!0},void 0,A(d.Typography,{variant:"subtitle"},void 0,"Branches with specific revenue sharing")),K=A(d.Grid,{item:!0,xs:12},void 0,A(D.a,{})),Q=A(d.Grid,{item:!0,xs:12},void 0,A(d.Typography,{variant:"subtitle"},void 0,"Standard Revenue Sharing with Partners")),Y=A(d.Grid,{item:!0},void 0,A(d.Typography,{variant:"caption"},void 0,"and")),Z=A(d.Grid,{item:!0}),ee=A(d.Grid,{item:!0},void 0,A(d.Typography,{variant:"subtitle"},void 0,"Partners with specific revenue sharing")),te=A(d.Grid,{item:!0,xs:12},void 0,A(D.a,{})),ae=function(e){function t(){var e,a,n,i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,c=new Array(o),d=0;d<o;d++)c[d]=arguments[d];return i=this,r=(e=M(t)).call.apply(e,[this].concat(c)),n=!r||"object"!==O(r)&&"function"!==typeof r?U(i):r,V(U(n),"success",function(){return l.toast.success(n.state.notification)}),V(U(n),"error",function(){return l.toast.error(n.state.notification)}),V(U(n),"warn",function(){return l.toast.warn(n.state.notification)}),V(U(n),"state",(V(a={open:!1,partneropen:!1,activetab:"branch",revenuePercentage:n.props.bankFeeDetails.revenue_sharing_rule.infra_share.percentage||0,revenueAmount:n.props.bankFeeDetails.revenue_sharing_rule.infra_share.fixed||0,name:n.props.bankFeeDetails,trans_type:"",active:"",ranges:"",bank_id:"",token:"",standardRevenueSharingRule:{claim:0,send:0},branchWithSpecificRevenue:[],standardPartnerRevenueSharingRule:{claim:0,send:0},partnerWithSpecificRevenue:[]},"token",window.localStorage.getItem("bankLogged")),V(a,"bankBranchesTable",!0),a)),V(U(n),"saveRevenueSharingRules",function(){n.props.revenueData?s.a.post("".concat(P.a,"/save-revenue-sharing-rules/").concat(n.state.selectedBankFeeId),{token:n.state.token,revenue_sharing_rule:{branch_share:n.state.standardRevenueSharingRule,specific_branch_share:n.state.branchWithSpecificRevenue,partner_share:n.state.standardPartnerRevenueSharingRule,specific_partner_share:n.state.partnerWithSpecificRevenue}}).then(function(e){n.setState({notification:"Rule updated successfully",editRulesLoading:!1}),n.success()}).catch(function(e){console.log(e)}):(n.setState({notification:"Please add revenue rule first",editRulesLoading:!1}),his.error())}),V(U(n),"saveRevenue",function(){""!=n.state.revenueAmount||""!=n.state.revenuePercentage?n.createRevenueRule():(l.toast.error("Fields cannot be empty"),console.log("Empty revenue"))}),V(U(n),"showRevenueRuleDistributionPage",function(){s.a.post("".concat(P.a,"/getRevenueFeeFromBankFeeId/").concat(n.state.selectedBankFeeId),{token:n.state.token}).then(function(e){console.log(e);var t=e.data;1==t.code?n.setState({revenueData:t}):n.setState({revenueData:""})}).catch(function(e){console.log(e)})}),V(U(n),"createRevenueRule",function(){n.setState({createRulesLoading:!0});var e=n.state,t=(e.name,e.trans_type),a=(e.active,e.bank_id,e.token),i=(e.revenuePercentage,e.revenueAmount,e.selectedBankFeeId);s.a.post("".concat(P.a,"/bank/sendShareForApproval"),{trans_type:t,token:a,percentage:n.state.revenuePercentage,fixed:n.state.revenueAmount}).then(function(e){if(200!=e.status)throw new Error(e.data.error);if(e.data.error)throw e.data.error;n.setState({notification:"Rule sent for Approval"},function(){n.success();n.state.bank,n.props.history;setTimeout(function(){n.props.showRevenueRuleDistributionPage({trans_type:t,_id:i,name:n.state.name})},1e3)}),n.setState({createRulesLoading:!1})}).catch(function(e){n.setState({notification:e.response?e.response.data.error:e.toString(),createRulesLoading:!1}),n.error()})}),V(U(n),"editRrRules",function(e){n.setState({editRulesLoading:!0});var t=n.state,a=t.name,i=t.trans_type,r=t.active,o=t.bank_id,c=t.token,d=t.revenuePercentage,l=t.revenueAmount,u=t.selectedBankFeeId,p=e,v=[{trans_from:0,trans_to:0,fixed_amount:l,percentage:d}];s.a.post("".concat(P.a,"/editBankBankRule"),{name:a,trans_type:i,active:r,ranges:v,bank_id:o,token:c,rule_id:p,selectedBankFeeId:u}).then(function(e){if(200!=e.status)throw new Error(e.data.error);if(e.data.error)throw e.data.error;n.setState({notification:"Bank Rule Updated"},function(){n.success();n.state.bank,n.props.history;setTimeout(function(){n.props.showRevenueRuleDistributionPage({trans_type:i,_id:u,name:a})},1e3)}),n.setState({editRulesLoading:!1})}).catch(function(e){n.setState({notification:e.response?e.response.data.error:e.toString(),editRulesLoading:!1}),n.error()})}),V(U(n),"getBranchDetailsFromModal",function(e){if(n.state.branchWithSpecificRevenue.map(function(e){return e.branch_code}).includes(e[0].bcode))return alert("Branch already saved");n.setState(function(t){return j({},t,{branchWithSpecificRevenue:[].concat(E(t.branchWithSpecificRevenue),[{branch_code:e[0].bcode,branch_name:e[0].name,claim:0,send:0}])})}),n.setState({open:!1})}),V(U(n),"getPartnerDetailsFromModal",function(e){if(n.state.partnerWithSpecificRevenue.map(function(e){return e.partner_code}).includes(e[0].code))return alert("Partner already saved");n.setState(function(t){return j({},t,{partnerWithSpecificRevenue:[].concat(E(t.partnerWithSpecificRevenue),[{partner_code:e[0].code,partner_name:e[0].name,claim:0,send:0}])})}),n.setState({partneropen:!1})}),n}var a,n,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,r.a.Component),a=t,(n=[{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=e.selectedBankFeeId,n=e.revenueData,i=e.bankFeeDetails,r=i.name,o=i.trans_type,s=i.active,c=i.bank_id,d="",l="";if(console.log(n),n){var u=n.fee.infra_share;d=u.fixed,l=u.percentage;var p=n.fee,v=p.specific_branch_share,f=p.branch_share,h=p.partner_share,m=p.specific_partner_share;this.setState(function(e){return j({},t,{name:r,trans_type:o,active:s,bank_id:c,selectedBankFeeId:a,revenueAmount:d,revenuePercentage:l,standardRevenueSharingRule:f||e.branch_share,branchWithSpecificRevenue:v||e.specific_branch_share,standardPartnerRevenueSharingRule:h||e.partner_share,partnerWithSpecificRevenue:m||e.specific_partner_share})})}else this.setState(j({},t,{name:r,trans_type:o,active:s,bank_id:c,selectedBankFeeId:a,revenueAmount:d,revenuePercentage:l}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return A(d.Grid,{container:!0,style:{width:"74%",border:"1px solid grey"}},void 0,A(d.Grid,{container:!0,style:{textAlign:"center",background:"#f5a623",padding:12},alignItems:"center",justify:"space-between"},void 0,A(d.Grid,{item:!0},void 0,A(d.Typography,{variant:"h5",style:{color:"white"}},void 0,"Revenue Rule Distribution ( "+this.state.name+" )")),A(d.Grid,{item:!0},void 0,A(S.a,{onClick:this.props.close},void 0,"x"))),A(d.Grid,{style:{margin:"2%",border:"1px solid #d0d6d1",paddingTop:"3%"},container:!0},void 0,A(d.Grid,{item:!0,md:12},void 0,A(d.Typography,{variant:"subtitle1",style:{paddingLeft:"3%"}},void 0,"Revenue with Infra")),A(d.Grid,{style:{margin:"0 0 2% 2%"},item:!0,md:3},void 0,A(d.TextField,{type:"number",label:"Percentage",className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",required:"true",onChange:function(t){var a=t.target.value;e.setState({revenuePercentage:a})},value:this.state.revenuePercentage})),A(d.Grid,{item:!0,md:1},void 0,A(d.Typography,{style:{paddingTop:"40%",textAlign:"center"}},void 0,"and")),A(d.Grid,{item:!0,md:3},void 0,A(d.TextField,{type:"number",label:"Fixed",className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",required:"true",onChange:function(t){var a=t.target.value;e.setState({revenueAmount:a})},value:this.state.revenueAmount})),A(d.Grid,{item:!0,md:3},void 0,A(B.a,{disabled:2===this.props.revenueData.infra_status,variant:"contained",color:"primary",style:{height:"40%",marginTop:"23px",marginLeft:"13%"},onClick:this.saveRevenue,className:t.button},void 0,1===this.props.revenueData.infra_status?"Update":2===this.props.revenueData.infra_status?"Pending":"Send for Approval"))),A(d.Grid,{style:{margin:"2%",border:"1px solid #d0d6d1",paddingTop:"3%",display:"".concat("Wallet to Wallet"===this.state.trans_type?"none":"flex")},container:!0,spacing:16},void 0,A(d.Grid,{item:!0,md:12},void 0,A("span",{className:"".concat("branch"===this.state.activetab?"ActiveTab":"InactiveTab"," "),onClick:function(){return e.setState({activetab:"branch"})}},void 0,"Bank Branches"),A("span",{className:"".concat("partner"===this.state.activetab?"ActiveTab":"InactiveTab"," "),onClick:function(){return e.setState({activetab:"partner"})}},void 0,"Bank Partner")),"branch"===this.state.activetab?A(d.Grid,{container:!0,spacing:16},void 0,A(d.Grid,{item:!0,xs:12},void 0,A("div",{className:t.border},void 0,A(d.Grid,{container:!0,alignItems:"center"},void 0,z,A(d.Grid,{item:!0},void 0,A(d.TextField,{type:"number",label:"claim%",className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",disabled:"Non Wallet to Wallet"===this.state.trans_type||"Non Wallet to Operational"===this.state.trans_type,onChange:function(t){var a=t.target.value;e.setState(function(e){return{standardRevenueSharingRule:j({},e.standardRevenueSharingRule,{claim:a})}})},value:this.state.standardRevenueSharingRule.claim})),$,A(d.Grid,{item:!0},void 0,A(d.TextField,{type:"number",label:"send%",disabled:"Wallet to Non Wallet"===this.state.trans_type,className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var a=t.target.value;e.setState(function(e){return{standardRevenueSharingRule:j({},e.standardRevenueSharingRule,{send:a})}})},value:this.state.standardRevenueSharingRule.send})),J))),A(d.Grid,{item:!0,xs:12},void 0,A("div",{className:t.border},void 0,A(d.Grid,{container:!0},void 0,A(d.Grid,{item:!0,xs:12,container:!0,justify:"space-between",alignItems:"center"},void 0,X,A(d.Grid,{item:!0},void 0,A(S.a,{onClick:function(){return e.setState({open:!0})}},void 0,"Add branch"))),A(d.Grid,{container:!0,spacing:4,style:{paddingTop:32},alignItems:"center"},void 0,this.state.branchWithSpecificRevenue.map(function(a,n){return r.a.createElement(r.a.Fragment,null,A(d.Grid,{item:!0,xs:2},void 0,a.branch_code),A(d.Grid,{item:!0,xs:2},void 0,a.branch_name),A(d.Grid,{item:!0,xs:3},void 0,A(d.TextField,{type:"number",label:"claim%",disabled:"Non Wallet to Wallet"===e.state.trans_type||"Non Wallet to Operational"===e.state.trans_type,className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var a=t.target.value,i=e.state.branchWithSpecificRevenue;i[n].claim=a,e.setState({branchWithSpecificRevenue:i})},value:a.claim})),A(d.Grid,{item:!0,xs:3},void 0,A(d.TextField,{type:"number",label:"send%",disabled:"Wallet to Non Wallet"===e.state.trans_type,className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var a=t.target.value,i=e.state.branchWithSpecificRevenue;i[n].send=a,e.setState({branchWithSpecificRevenue:i})},value:a.send})),A(d.Grid,{item:!0,xs:2},void 0,A(S.a,{onClick:function(){e.setState(function(e){return j({},e,{branchWithSpecificRevenue:e.branchWithSpecificRevenue.filter(function(e){return e.branch_code!==a.branch_code})})})}},void 0,"delete")))}),K,A(d.Grid,{item:!0,xs:12,style:{textAlign:"right"}},void 0,A(B.a,{variant:"contained",color:"primary",style:{marginTop:"13px"},className:t.button,onClick:this.saveRevenueSharingRules,type:"button"},void 0,"Update"))))))):null,"partner"===this.state.activetab?A(d.Grid,{container:!0,spacing:16},void 0,A(d.Grid,{item:!0,xs:12},void 0,A("div",{className:t.border},void 0,A(d.Grid,{container:!0,alignItems:"center"},void 0,Q,A(d.Grid,{item:!0},void 0,A(d.TextField,{type:"number",label:"claim%",className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",disabled:"Non Wallet to Wallet"===this.state.trans_type||"Non Wallet to Operational"===this.state.trans_type,onChange:function(t){var a=t.target.value;e.setState(function(e){return{standardPartnerRevenueSharingRule:j({},e.standardPartnerRevenueSharingRule,{claim:a})}})},value:this.state.standardPartnerRevenueSharingRule.claim})),Y,A(d.Grid,{item:!0},void 0,A(d.TextField,{type:"number",label:"send%",disabled:"Wallet to Non Wallet"===this.state.trans_type,className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var a=t.target.value;e.setState(function(e){return{standardPartnerRevenueSharingRule:j({},e.standardPartnerRevenueSharingRule,{send:a})}})},value:this.state.standardPartnerRevenueSharingRule.send})),Z))),A(d.Grid,{item:!0,xs:12},void 0,A("div",{className:t.border},void 0,A(d.Grid,{container:!0},void 0,A(d.Grid,{item:!0,xs:12,container:!0,justify:"space-between",alignItems:"center"},void 0,ee,A(d.Grid,{item:!0},void 0,A(S.a,{onClick:function(){return e.setState({partneropen:!0})}},void 0,"Add Partner"))),A(d.Grid,{container:!0,spacing:4,style:{paddingTop:32},alignItems:"center"},void 0,this.state.partnerWithSpecificRevenue.map(function(a,n){return r.a.createElement(r.a.Fragment,null,A(d.Grid,{item:!0,xs:2},void 0,a.partner_code),A(d.Grid,{item:!0,xs:2},void 0,a.partner_name),A(d.Grid,{item:!0,xs:3},void 0,A(d.TextField,{type:"number",label:"claim%",disabled:"Non Wallet to Wallet"===e.state.trans_type||"Non Wallet to Operational"===e.state.trans_type,className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var a=t.target.value,i=e.state.partnerWithSpecificRevenue;i[n].claim=a,e.setState({partnerWithSpecificRevenue:i})},value:a.claim})),A(d.Grid,{item:!0,xs:3},void 0,A(d.TextField,{type:"number",label:"send%",disabled:"Wallet to Non Wallet"===e.state.trans_type,className:W()(t.textField,t.dense),margin:"dense",variant:"outlined",onChange:function(t){var a=t.target.value,i=e.state.partnerWithSpecificRevenue;i[n].send=a,e.setState({partnerWithSpecificRevenue:i})},value:a.send})),A(d.Grid,{item:!0,xs:2},void 0,A(S.a,{onClick:function(){e.setState(function(e){return j({},e,{partnerWithSpecificRevenue:e.partnerWithSpecificRevenue.filter(function(e){return e.partner_code!==a.partner_code})})})}},void 0,"delete")))}),te,A(d.Grid,{item:!0,xs:12,style:{textAlign:"right"}},void 0,A(B.a,{variant:"contained",color:"primary",style:{marginTop:"13px"},className:t.button,onClick:this.saveRevenueSharingRules,type:"button"},void 0,"Update"))))))):null),A(I.a,{open:this.state.open,bank_id:this.state.bank_id,handleClose:function(){return e.setState({open:!1})},getBranchDetailsFromModal:this.getBranchDetailsFromModal}),A(C.a,{partneropen:this.state.partneropen,bank_id:this.state.bank_id,handleClose:function(){return e.setState({partneropen:!1})},getPartnerDetailsFromModal:this.getPartnerDetailsFromModal}))}}])&&L(a.prototype,n),i&&L(a,i),t}(),ne=Object(d.withStyles)(function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},table:{minWidth:700},bankBranches:{padding:"3%",fontWeight:600},border:{border:"1px solid #000",padding:2*e.spacing.unit}}})(ae);a("18fd55adb10446515347");function ie(e){return(ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t,a,n){q||(q="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=e&&e.defaultProps,r=arguments.length-3;if(t||0===r||(t={children:void 0}),t&&i)for(var o in i)void 0===t[o]&&(t[o]=i[o]);else t||(t=i||{});if(1===r)t.children=n;else if(r>1){for(var s=new Array(r),c=0;c<r;c++)s[c]=arguments[c+3];t.children=s}return{$$typeof:q,type:e,key:void 0===a?null:""+a,ref:null,props:t,_owner:null}}function oe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"BankFees",function(){return Ie}),l.toast.configure({position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});u.c.div.withConfig({displayName:"BankFees__Tab",componentId:"sc-926a65-0"})(["background:",";width:194px;padding:15px;float:left;border:1px solid ",";color:#fff;font-size:20px;"],function(e){return e.theme.primary},function(e){return e.theme.primary}),u.c.div.withConfig({displayName:"BankFees__Tab2",componentId:"sc-926a65-1"})(["float:left;width:194px;border:1px solid ",";color:",";font-size:20px;padding:15px;"],function(e){return e.theme.primary},function(e){return e.theme.primary});var ue=localStorage.getItem("bankLogged"),pe=localStorage.getItem("bankId"),ve=0;function fe(e,t,a,n,i){return{id:ve+=1,name:e,calories:t,fat:a,carbs:n,protein:i}}fe("AA11","AXIS","Submit"),fe("AA11","AXIS","Submit");var he=re(m.a,{fullPage:!0}),me=re(c.Helmet,{},void 0,re("meta",{charSet:"utf-8"}),re("title",{},void 0,"Banks | INFRA | E-WALLET")),ge=re(v.a,{}),be=re(f.a,{active:"fees"}),ye=re("div",{className:"cardHeader"},void 0,re("div",{className:"cardHeaderLeft"},void 0,re("i",{className:"material-icons"},void 0,"supervised_user_circle")),re("div",{className:"cardHeaderRight"},void 0,re("h3",{},void 0,"Revenue Sharing Rules"),re("h5",{},void 0,"Fees created by the infra"))),Se=re("thead",{},void 0,re("tr",{},void 0,re("th",{},void 0,"Name"),re("th",{},void 0,"Transaction Type"),re("th",{},void 0,"Ranges"),re("th",{}))),ke=re("span",{className:"absoluteMiddleRight primary popMenuTrigger"},void 0,re("i",{className:"material-icons "},void 0,"block")),Re=re("div",{className:"iconedInput fl"},void 0,re("i",{className:"material-icons"},void 0,"search"),re("input",{type:"text",placeholder:"Search"})),_e=re("i",{className:"material-icons"},void 0,"add"),we=re("span",{},void 0,re("span",{},void 0,"Create Fee")),xe=re("div",{className:"cardHeader"},void 0,re("div",{className:"cardHeaderLeft"},void 0,re("i",{className:"material-icons"},void 0,"supervised_user_circle")),re("div",{className:"cardHeaderRight"},void 0,re("h3",{},void 0,"Fee Rules"),re("h5",{},void 0,"Fees created by the bank"))),Fe=re("th",{},void 0,"Name"),Pe=re("th",{},void 0,"Transaction Range"),Te=re("th",{}),Be=re("th",{}),Ne=re(m.a,{}),We=re("span",{},void 0,"Decline"),Ge=re(m.a,{}),De=re("span",{},void 0,"Approve"),Ie=function(e){function t(){var e,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,n=se(t).call(this),e=!n||"object"!==ie(n)&&"function"!==typeof n?ce(a):n,le(ce(e),"success",function(){return l.toast.success(e.state.notification)}),le(ce(e),"error",function(){return l.toast.error(e.state.notification)}),le(ce(e),"warn",function(){return l.toast.warn(e.state.notification)}),le(ce(e),"handleInputChange",function(t){var a=t.target,n=a.value,i=a.name;e.setState(le({},i,n))}),le(ce(e),"goBankEdit",function(t){e.props.history.push("/bank/edit-fee/".concat(t))}),le(ce(e),"showMiniPopUp",function(t,a){e.setState({popname:t.name,poptype:t.trans_type,sid:t._id,popup:!0,html:a})}),le(ce(e),"closeMiniPopUp",function(){e.setState({popup:!1})}),le(ce(e),"logout",function(){localStorage.removeItem("logged"),localStorage.removeItem("name"),e.setState({redirect:!0})}),le(ce(e),"addBank",function(t){t.preventDefault(),s.a.post("".concat(P.a,"/generateOTP"),{name:e.state.name,mobile:e.state.mobile,page:"addBank",token:ue}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({showOtp:!0,notification:"OTP Sent"}),e.success()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),le(ce(e),"approve",function(t){e.setState({approveLoading:!0}),t.preventDefault(),s.a.post("".concat(P.a,"/approveFee"),{id:e.state.sid,token:ue}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Approved"},function(){e.success(),e.closeMiniPopUp(),e.getRules()}),e.setState({approveLoading:!1})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString(),approveLoading:!1}),e.error()})}),le(ce(e),"decline",function(t){e.setState({declineLoading:!0}),t.preventDefault(),s.a.post("".concat(P.a,"/declineFee"),{id:e.state.sid,token:ue}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Declined"},function(){e.success(),e.closeMiniPopUp(),e.getRules()}),e.setState({declineLoading:!1})}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString(),declineLoading:!1}),e.error()})}),le(ce(e),"showWallet",function(e){e.preventDefault()}),le(ce(e),"verifyOTP",function(t){t.preventDefault(),s.a.post("".concat(P.a,"/addBank"),{name:e.state.name,address1:e.state.address1,state:e.state.state,zip:e.state.zip,country:e.state.country,ccode:e.state.ccode,email:e.state.email,mobile:e.state.mobile,logo:e.state.logo,contract:e.state.contract,otp:e.state.otp,token:ue}).then(function(t){if(200!=t.status)throw new Error(t.data.error);if(t.data.error)throw t.data.error;e.setState({notification:"Bank added successfully!"}),e.success(),e.closeMiniPopUp(),e.getBanks()}).catch(function(t){e.setState({notification:t.response?t.response.data.error:t.toString()}),e.error()})}),le(ce(e),"removeFile",function(t){e.setState(le({},t,null))}),le(ce(e),"triggerBrowse",function(e){document.getElementById(e).click()}),le(ce(e),"getRules",function(){s.a.post("".concat(P.a,"/getBankRules"),{bank_id:e.state.bank}).then(function(t){console.log(t),200==t.status&&(console.log(t.data),e.setState({loading:!1,rules:t.data.rules}))}).catch(function(e){})}),le(ce(e),"showInfraFeeView",function(){console.log("working!!"),e.setState({isInfraFeeVisible:!0})}),le(ce(e),"showBankFeeView",function(){console.log("working bank!!"),e.setState({isInfraFeeVisible:!1})}),le(ce(e),"showPopup",function(){e.setState({popup:!0})}),le(ce(e),"closePopup",function(){e.setState({popup:!1})}),le(ce(e),"showRevenueRuleDistributionPage",function(t){e.setState({revenueRuleDistributionPage:"true",selectedBankFeeId:t._id,bankFeeDetails:t}),s.a.post("".concat(P.a,"/getRevenueFeeFromBankFeeId/").concat(t._id),{token:ue}).then(function(t){var a=t.data;1==a.status?e.setState({revenueData:a}):e.setState({revenueData:""})}).catch(function(e){console.log(e)})}),le(ce(e),"showBankBranches",function(){e.setState({bankBranchesTable:!0,bankPartnersTable:!1,bankMerchantsTable:!1})}),le(ce(e),"showBankPartners",function(){e.setState({bankBranchesTable:!1,bankPartnersTable:!0,bankMerchantsTable:!1})}),e.state={sid:"",bank:pe,name:"",address1:"",html:"",popname:"",poprange:"",poptype:"",poppercent:"",state:"",zip:"",country:"",ccode:"",mobile:"",email:"",logo:null,contract:null,loading:!0,redirect:!1,totalBanks:0,notification:"Welcome",popup:!1,user_id:ue,banks:[],rules:[],otp:"",showOtp:!1,isInfraFeeVisible:!1,revenueRuleDistributionPage:!1,percentage:"",bankBranchesTable:!0,bankPartnersTable:!1,bankMerchantsTable:!1,bankFeeDetails:"",selectedBankFeeId:"",revenueData:""},e.success=e.success.bind(ce(e)),e.error=e.error.bind(ce(e)),e.warn=e.warn.bind(ce(e)),e.onChange=e.onChange.bind(ce(e)),e.fileUpload=e.fileUpload.bind(ce(e)),e}var a,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,i["Component"]),a=t,(n=[{key:"onChange",value:function(e){e.target.files&&null!=e.target.files[0]&&this.fileUpload(e.target.files[0],e.target.getAttribute("data-key"))}},{key:"fileUpload",value:function(e,t){var a=this,n=new FormData;n.append("file",e);s.a.post("".concat(P.a,"/fileUpload?token=").concat(ue),n,{headers:{"content-type":"multipart/form-data"}}).then(function(e){if(200!=e.status)throw e.data.error;if(e.data.error)throw e.data.error;a.setState(le({},t,e.data.name))}).catch(function(e){a.setState({notification:e.response?e.response.data.error:e.toString()}),a.error()})}},{key:"componentDidMount",value:function(){void 0!==ue&&null!==ue&&this.getRules()}},{key:"render",value:function(){var e=this;this.props.classes;var t=this.state,a=t.loading,n=t.redirect;if(a)return he;if(n)return null;var i=this;return re(p.a,{from:"bank"},void 0,me,ge,re(h.a,{verticalMargin:!0},void 0,be,re(g.a,{style:{display:"".concat(this.state.revenueRuleDistributionPage?"none":"block")}},void 0,re(y.a,{bigPadding:!0,style:{display:"".concat(this.state.isInfraFeeVisible?"block":"none")}},void 0,ye,re("div",{className:"cardBody"},void 0,re(k.a,{marginTop:"34px",smallTd:!0},void 0,Se,re("tbody",{},void 0,this.state.rules&&this.state.rules.length>0?this.state.rules.map(function(e,t){var a=e.ranges;return re("tr",{},e._id,re("td",{},void 0,(e.status,re("span",{},void 0,e.name))),re("td",{className:"tac"},void 0,(e.status,re("span",{},void 0,e.trans_type))),re("td",{},void 0,a.map(function(e){return re("div",{},void 0,"Count:"," ",re("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",re("span",{className:"green"},void 0,"".concat(P.c," ").concat(e.fixed)),", Percentage:"," ",re("span",{className:"green"},void 0,e.percentage))})),re("td",{className:"tac bold"},void 0,"Inactive"==e.active?ke:re(S.a,{className:"addBankButton",onClick:function(){return i.goBankEdit(e._id)}},void 0,0==e.status?"Pending":2==e.status?"Declined":"Approved")))}):null)))),re("div",{style:{display:"".concat(this.state.isInfraFeeVisible?"none":"block")}},void 0,re(b.a,{marginBottom:"33px",inputWidth:"calc(100% - 241px)",className:"clr"},void 0,Re,re(R.a,{href:"/bank/create-fee",float:"right"},void 0,re(S.a,{className:"addBankButton",flex:!0,onClick:this.try},void 0,_e,we))),re(y.a,{bigPadding:!0},void 0,xe,re("div",{className:"cardBody"},void 0,re(k.a,{marginTop:"34px",smallTd:!0},void 0,re("thead",{},void 0,re("tr",{},void 0,Fe,re("th",{style:{width:"10rem"}},void 0,"Transaction Type"),Pe,Te,Be)),re("tbody",{},void 0,this.state.rules&&this.state.rules.length>0?this.state.rules.map(function(t,a){var n=t.ranges;return re("tr",{},t._id,re("td",{},void 0,t.name),re("td",{className:"tac"},void 0,t.trans_type),re("td",{},void 0,n.map(function(e){return re("div",{},void 0,"Range:"," ",re("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",re("span",{className:"green"},void 0,"".concat(P.c," ").concat(e.fixed)),", Percentage:"," ",re("span",{className:"green"},void 0,e.percentage))})),re("td",{className:"tac bold"},void 0,re(S.a,le({className:"addBankButton",onClick:function(){return i.goBankEdit(t._id)}},"className","pointer"),void 0,"Edit")),re("td",{},void 0,re(S.a,{onClick:function(){return e.showRevenueRuleDistributionPage(t)}},void 0,"Revenue Sharing Rule")))}):null)))))),this.state.revenueRuleDistributionPage?re(ne,{showRevenueRuleDistributionPage:this.showRevenueRuleDistributionPage,close:function(){return e.setState({revenueRuleDistributionPage:!1})},selectedBankFeeId:this.state.selectedBankFeeId,revenueData:this.state.revenueData,bankFeeDetails:this.state.bankFeeDetails}):null),this.state.popup?re(_.a,{close:this.closeMiniPopUp.bind(this)},void 0,this.state.showOtp?re("div",{},void 0,re("h1",{},void 0,r.a.createElement(FormattedMessage,messages.verify)),re("form",{},void 0,re(F.a,{},void 0,re("label",{},void 0,r.a.createElement(FormattedMessage,messages.otp),"*"),re(TextInput,{type:"text",name:"otp",onFocus:function(e){e.target.parentElement.querySelector("label").classList.add("focused")},onBlur:function(e){var t=e.target;""==t.value&&t.parentElement.querySelector("label").classList.remove("focused")},value:this.state.otp,onChange:this.handleInputChange,required:!0})),re(S.a,{filledBtn:!0,marginTop:"50px"},void 0,re("span",{},void 0,r.a.createElement(FormattedMessage,messages.verify))))):re("div",{},void 0,re("form",{},void 0,re("p",{},void 0,re("span",{id:"popname"},void 0,this.state.popname)),re("p",{},void 0," ","Sending from ",re("span",{id:"poptype"},void 0,this.state.poptype)),this.state.html.map(function(e){return re("div",{},void 0,"Count:"," ",re("span",{className:"green"},void 0,e.trans_from," - ",e.trans_to),", Fixed:"," ",re("span",{className:"green"},void 0,"".concat(P.c," ").concat(e.fixed)),", Percentage:"," ",re("span",{className:"green"},void 0,e.percentage))}),re(w.a,{},void 0,re(x.a,{},void 0,re(F.a,{},void 0,this.state.declineLoading?re(S.a,{filledBtn:!0,marginTop:"50px",accentedBtn:!0,onClick:this.decline,disabled:!0},void 0,Ne):re(S.a,{filledBtn:!0,marginTop:"50px",accentedBtn:!0,onClick:this.decline},void 0,We))),re(x.a,{},void 0,re(F.a,{},void 0,this.state.approveLoading?re(S.a,{filledBtn:!0,marginTop:"50px",onClick:this.approve,disabled:!0},void 0,Ge):re(S.a,{filledBtn:!0,marginTop:"50px",onClick:this.approve},void 0,De))))))):null)}}])&&oe(a.prototype,n),o&&oe(a,o),t}();t.default=Object(d.withStyles)(function(e){return{textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit},dense:{marginTop:16},table:{minWidth:700},bankBranches:{padding:"3%",fontWeight:600}}})(Ie)}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{"04e49f09eba75aba5319":function(t,e,a){"use strict";a.r(e);var o,n=a("8af190b70a6bc55c6f1b"),i=a("e95a63b25fb92ed15721"),r=a("bd183afcc37eabd79225"),s=a.n(r),c=a("0d7f0986bcd2f33d8a2a"),d=a("7286e4d32da69e8d8af9"),l=a("ab039aecd4a1d4fedc0e"),u="boilerplate.containers.BankPage",f=(Object(l.defineMessages)({search:{id:"".concat("boilerplate.containers.All",".search"),defaultMessage:""},addbank:{id:"".concat(u,".addbank"),defaultMessage:""},title:{id:"".concat(u,".title"),defaultMessage:""},subtitle:{id:"".concat(u,".subtitle"),defaultMessage:""},th1:{id:"".concat(u,".th1"),defaultMessage:""},th2:{id:"".concat(u,".th2"),defaultMessage:""},th3:{id:"".concat(u,".th3"),defaultMessage:""},th4:{id:"".concat(u,".th4"),defaultMessage:""},th5:{id:"".concat(u,".th5"),defaultMessage:""},menu1:{id:"".concat(u,".menu1"),defaultMessage:""},menu2:{id:"".concat(u,".menu2"),defaultMessage:""},menu3:{id:"".concat(u,".menu3"),defaultMessage:""},popup1:{id:"".concat(u,".popup1"),defaultMessage:""},popup2:{id:"".concat(u,".popup2"),defaultMessage:""},popup3:{id:"".concat(u,".popup3"),defaultMessage:""},popup4:{id:"".concat(u,".popup4"),defaultMessage:""},popup5:{id:"".concat(u,".popup5"),defaultMessage:""},popup6:{id:"".concat(u,".popup6"),defaultMessage:""},popup7:{id:"".concat(u,".popup7"),defaultMessage:""},popup8:{id:"".concat(u,".popup8"),defaultMessage:""},popup9:{id:"".concat(u,".popup9"),defaultMessage:""},popup10:{id:"".concat(u,".popup10"),defaultMessage:""},verify:{id:"".concat(u,".verify"),defaultMessage:""},otp:{id:"".concat(u,".otp"),defaultMessage:""}}),a("5eab5618c2f7cb367580")),p=a("2f99b2068e4e32a85fbf"),g=a("b9a4675f3a31731e3871"),h=(a("b9850c1c3570101006d5"),a("bd52f7640650dc9ceb27"),a("71ec66720a09c58ba054")),b=a("9590d550c12e56a1afd4"),m=a("0b036161fbb62d587aed"),v=(a("c62184e16136b13faf11"),a("edda6002988d22cf0116")),y=a("041021065ead6515c7e1"),k=a("44d868fbe7bf379dace3"),w=(a("fa2ce0da44cf966bc1d9"),a("3cfc5fe5ae5fc3fb28ab"),a("a5a6067b351c18817e3b"),a("d4645642fe31e65af398"),a("5f20f32fdea28feabd2e")),S=a.n(w),P=(a("1338cbe09bd1ccd2eec5"),a("80305d31256481b97990")),_=a("0b3cb19af78752326f59"),M=a("fcb99a06256635f70435");a("18fd55adb10446515347");function C(t){return(C="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e,a,n){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var i=t&&t.defaultProps,r=arguments.length-3;if(e||0===r||(e={children:void 0}),e&&i)for(var s in i)void 0===e[s]&&(e[s]=i[s]);else e||(e=i||{});if(1===r)e.children=n;else if(r>1){for(var c=new Array(r),d=0;d<r;d++)c[d]=arguments[d+3];e.children=c}return{$$typeof:o,type:t,key:void 0===a?null:""+a,ref:null,props:e,_owner:null}}function O(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"default",function(){return L});_.c.h4.withConfig({displayName:"OperationalHistory__H4",componentId:"sc-1pliapf-0"})(["> span{font-size:13px;color:#666;}"]);d.toast.configure({position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0});var B=localStorage.getItem("logged"),I=x(y.a,{fullPage:!0}),R=x(i.Redirect,{to:"/"}),j=x(c.Helmet,{},void 0,x("meta",{charSet:"utf-8"}),x("title",{},void 0,"Create Fee | INFRA | E-WALLET")),A=x(h.a,{infraNav:!0}),E=x(P.a,{href:"/dashboard",float:"left"},void 0,x("div",{className:"headerNavDash"},void 0,"Main Dashboard")),F=x("div",{className:"cardHeader"},void 0,x("div",{className:"cardHeaderLeft"},void 0,x("i",{className:"material-icons"},void 0,"playlist_add_check")),x("div",{className:"cardHeaderRight"},void 0,x("h3",{},void 0,"Operational Wallet Transaction"),x("h5",{},void 0,"E-wallet activity"))),J=x("div",{className:"labelSmallGrey"},void 0,"Completed"),L=function(t){function e(){var t,a,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a=this,o=N(e).call(this),t=!o||"object"!==C(o)&&"function"!==typeof o?H(a):o,D(H(t),"success",function(){return d.toast.success(t.state.notification)}),D(H(t),"error",function(){return d.toast.error(t.state.notification)}),D(H(t),"warn",function(){return d.toast.warn(t.state.notification)}),D(H(t),"handleInputChange",function(e){console.log(e);var a=e.target,o=a.value,n=a.name;t.setState(D({},n,o))}),D(H(t),"showPopup",function(){t.props.history.push("/createfee/"+t.props.match.params.bank)}),D(H(t),"closePopup",function(){t.setState({popup:!1,name:"",address1:"",state:"",zip:"",ccode:"",country:"",email:"",mobile:"",logo:null,contract:null,otp:"",showOtp:!1})}),D(H(t),"logout",function(){localStorage.removeItem("logged"),localStorage.removeItem("name"),t.setState({redirect:!0})}),D(H(t),"addBank",function(e){e.preventDefault(),s.a.post("".concat(M.a,"/generateOTP"),{name:t.state.name,mobile:t.state.mobile,page:"addBank",token:B}).then(function(e){if(200!=e.status)throw new Error(e.data.error);if(e.data.error)throw e.data.error;t.setState({showOtp:!0,notification:"OTP Sent"}),t.success()}).catch(function(e){t.setState({notification:e.response?e.response.data.error:e.toString()}),t.error()})}),D(H(t),"createRules",function(e){e.preventDefault(),""==t.state.fixed_amount&&""==t.state.percentage||""!=t.state.fixed_amount&&""!=t.state.percentage?t.setState({notification:"Fill either fixed amount or percentage"},function(){t.error()}):s.a.post("".concat(M.a,"/createRules"),t.state).then(function(e){if(200!=e.status)throw new Error(e.data.error);if(e.data.error)throw e.data.error;t.setState({notification:"Rule added"},function(){t.success();var e=t.state.bank,a=t.props.history;setTimeout(function(){a.push("/fees/"+e)},1e3)})}).catch(function(e){t.setState({notification:e.response?e.response.data.error:e.toString()}),t.error()})}),D(H(t),"verifyOTP",function(e){e.preventDefault(),s.a.post("".concat(M.a,"/addBank"),{name:t.state.name,address1:t.state.address1,state:t.state.state,zip:t.state.zip,country:t.state.country,ccode:t.state.ccode,email:t.state.email,mobile:t.state.mobile,logo:t.state.logo,contract:t.state.contract,otp:t.state.otp,token:B}).then(function(e){if(200!=e.status)throw new Error(e.data.error);if(e.data.error)throw e.data.error;t.setState({notification:"Bank added successfully!"}),t.success(),t.closePopup(),t.getBanks()}).catch(function(e){t.setState({notification:e.response?e.response.data.error:e.toString()}),t.error()})}),D(H(t),"removeFile",function(e){t.setState(D({},e,null))}),D(H(t),"triggerBrowse",function(t){document.getElementById(t).click()}),D(H(t),"getBanks",function(){s.a.post("".concat(M.a,"/getBank"),{token:B,bank_id:t.props.match.params.bank}).then(function(e){200==e.status&&t.setState({banks:e.data.banks,logo:e.data.banks.logo,bank_id:t.props.match.params.bank})}).catch(function(t){})}),D(H(t),"showHistory",function(){t.setState({history:[]},function(){var e=[],a=(t.state.activePage-1)*t.state.perPage,o=t.state.perPage*t.state.activePage;o>t.state.totalCount&&(o=t.state.totalCount);for(var n=a;n<o;n++)e.push(t.state.allhistory[n]);t.setState({history:e})})}),D(H(t),"getHistory",function(){s.a.post("".concat(M.a,"/getInfraHistory"),{token:B,from:"operational",bank_id:t.props.match.params.bank,page:t.state.activePage,offset:t.state.perPage}).then(function(e){if(200==e.status){var a=e.data.history.reverse();t.setState({loading:!1,allhistory:a,totalCount:e.data.history.length},function(){t.showHistory()})}}).catch(function(t){})}),D(H(t),"getHistoryTotal",function(){s.a.post("".concat(M.a,"/getInfraHistoryTotal"),{token:B,from:"operational",bank_id:t.props.match.params.bank}).then(function(e){200==e.status&&(console.log(e.data),t.setState({loading:!1,totalCount:e.data.total},function(){t.getHistory()}))}).catch(function(t){})}),D(H(t),"filterData",function(e){t.setState({filter:e})}),D(H(t),"handlePageChange",function(e){console.log("active page is ".concat(e)),t.setState({activePage:e}),t.showHistory()}),t.state={bank_id:"",bank:"",logo:null,contract:null,loading:!0,redirect:!1,name:"",trans_type:"",perPage:5,totalCount:100,allhistory:[],activePage:1,active:"Active",trans_from:"",trans_to:"",transcount_from:"",history:[],filter:"",transcount_to:"",fixed_amount:"",percentage:"",notification:"",popup:!1,user_id:B,banks:[],otp:"",showOtp:!1,token:B},t.success=t.success.bind(H(t)),t.error=t.error.bind(H(t)),t.warn=t.warn.bind(H(t)),t.onChange=t.onChange.bind(H(t)),t.fileUpload=t.fileUpload.bind(H(t)),t.showHistory=t.showHistory.bind(H(t)),t}var a,o,i;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,n["Component"]),a=e,(o=[{key:"onChange",value:function(t){t.target.files&&null!=t.target.files[0]&&this.fileUpload(t.target.files[0],t.target.getAttribute("data-key"))}},{key:"fileUpload",value:function(t,e){var a=this,o=new FormData;o.append("file",t);s.a.post("".concat(M.a,"/fileUpload?token=").concat(B),o,{headers:{"content-type":"multipart/form-data"}}).then(function(t){if(200!=t.status)throw t.data.error;if(t.data.error)throw t.data.error;a.setState(D({},e,t.data.name))}).catch(function(t){a.setState({notification:t.response?t.response.data.error:t.toString()}),a.error()})}},{key:"componentDidMount",value:function(){if(this.setState({bank:this.props.match.params.bank}),void 0!==B&&null!==B){this.getBanks();var t=this;setInterval(function(){t.getHistory()},2e3)}}},{key:"render",value:function(){var t=this;var e=this.state,a=e.loading,o=e.redirect;if(a)return I;if(o)return R;var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=this;return x(f.a,{},void 0,j,x(p.a,{},void 0,A,x(g.a,{},void 0,E)),x(g.a,{verticalMargin:!0},void 0,x("div",{className:"bankLogo",style:{display:"flex",justifyContent:"center",alignItems:"center",paddingBottom:"16px",marginBottom:"1.2rem",boxShadow:"0 0 1px black",paddingTop:"16px",backgroundColor:"white"}},void 0,x("img",{src:M.e+this.state.logo,style:{width:"75px"}}),x("div",{style:{paddingLeft:"5px",paddingTop:"7px"}},void 0,x("h2",{},void 0,this.state.banks&&this.state.banks.name))),x(b.a,{bankId:this.state.bank}),x(m.a,{},void 0,x(v.a,{bigPadding:!0},void 0,F,x("div",{className:"cardBody"},void 0,x("div",{className:"clr"},void 0,x("div",{className:"menuTabs",onClick:function(){return t.filterData("")}},void 0,"All"),x("div",{className:"menuTabs",onClick:function(){return t.filterData("DR")}},void 0,"Payment Sent"),x("div",{className:"menuTabs",onClick:function(){return t.filterData("CR")}},void 0,"Payment Received")),x(k.a,{marginTop:"34px",smallTd:!0,textAlign:"left"},void 0,x("tbody",{},void 0,this.state.history&&this.state.history.length>0?this.state.history.map(function(t){var e=t.Timestamp,a=new Date(e),o=a.getMonth(),r=a.getDay(),s=a.getFullYear(),c=a.getHours(),d=a.getMinutes(),l=r+" "+n[o]+" "+s+" "+c+":"+d;return i.state.filter==t.Value.tx_data.tx_type||""==i.state.filter?x("tr",{},t.TxId,x("td",{},void 0,x("div",{className:"labelGrey"},void 0,l)),x("td",{},void 0,x("div",{className:"labelBlue"},void 0,t.Value.tx_data.tx_details)," ",J),x("td",{className:"right"},void 0,x("div",{className:"labelGrey"},void 0,"DR"==t.Value.tx_data.tx_type?x("span",{},void 0,M.c," -",t.Value.amount):x("span",{},void 0,M.c," ",t.Value.amount)))):null}):null)),x("div",{},void 0,x(S.a,{activePage:this.state.activePage,itemsCountPerPage:this.state.perPage,totalItemsCount:this.state.totalCount,pageRangeDisplayed:5,onChange:this.handlePageChange})))))))}}])&&O(a.prototype,o),i&&O(a,i),e}()}}]);